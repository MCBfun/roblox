game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "å…¬å‘Š",
    Text = "åˆ·ç¥¨åŠ è½½ä¸­...",
    Icon = "rbxassetid://111333374680640",
    Duration = 3,
    Position = UDim2.new(0, 20, 1, -50)
})

-- ç­‰å¾…æ¸¸æˆå®Œå…¨åŠ è½½
wait(2)

-- æ£€æŸ¥æœ¬åœ°ç©å®¶
local Players = game:GetService("Players")
local localPlayer = Players.LocalPlayer

if not localPlayer then
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "é”™è¯¯",
        Text = "æ— æ³•è·å–æœ¬åœ°ç©å®¶",
        Duration = 5
    })
    return
end

-- ç­‰å¾…PlayerGuiï¼ˆæ·»åŠ è¶…æ—¶ä¿æŠ¤ï¼‰
local PlayerGui
local maxWaitTime = 30  -- æœ€å¤§ç­‰å¾…30ç§’
local startTime = tick()

repeat
    PlayerGui = localPlayer:FindFirstChild("PlayerGui")
    if not PlayerGui then
        wait(0.5)
    end
until PlayerGui or (tick() - startTime) > maxWaitTime

if not PlayerGui then
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "é”™è¯¯",
        Text = "ç­‰å¾…PlayerGuiè¶…æ—¶",
        Duration = 5
    })
    return
end

local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

-- æ£€æŸ¥æ˜¯å¦å·²æœ‰UIå­˜åœ¨ï¼Œé¿å…é‡å¤åˆ›å»º
if PlayerGui:FindFirstChild("PlaybreakToolbox") then
    PlayerGui:FindFirstChild("PlaybreakToolbox"):Destroy()
end

-- åˆ›å»ºUI
local ui = Instance.new("ScreenGui")
ui.Name = "PlaybreakToolbox"
ui.Parent = PlayerGui
ui.IgnoreGuiInset = false
ui.ResetOnSpawn = false
ui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- è®°å½•åŸå§‹é¢æ¿å¤§å°
local originalPanelSize = UDim2.new(0, 300, 0, 360)
local minimizedPanelSize = UDim2.new(0, 150, 0, 25)  -- è¿›ä¸€æ­¥ç¼©å°ï¼š150x25
local originalPosition = UDim2.new(0.05, 10, 0.5, -180)  -- è¿›ä¸€æ­¥é å·¦ï¼š5% + 10åƒç´ 

-- ä¸»é¢æ¿
local panel = Instance.new("Frame")
panel.Size = originalPanelSize
panel.Position = originalPosition
panel.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
panel.BorderSizePixel = 0
panel.Visible = true
panel.Parent = ui

-- æ·»åŠ åœ†è§’æ•ˆæœ
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = panel

-- æ·»åŠ é˜´å½±æ•ˆæœ
local shadow = Instance.new("UIStroke")
shadow.Color = Color3.fromRGB(0, 150, 255)
shadow.Thickness = 2
shadow.Parent = panel

-- æ ‡é¢˜æ 
local titleBar = Instance.new("Frame")
titleBar.Size = UDim2.new(1, 0, 0, 45)
titleBar.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
titleBar.BorderSizePixel = 0
titleBar.Parent = panel

local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 10, 10, 0)
titleCorner.Parent = titleBar

-- æ ‡é¢˜æ æ¸å˜æ•ˆæœ
local titleGradient = Instance.new("UIGradient")
titleGradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(30, 136, 229)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(100, 77, 245))
})
titleGradient.Rotation = 90
titleGradient.Parent = titleBar

-- æ ‡é¢˜æ–‡å­—ï¼ˆæ­£å¸¸å¤§å°ï¼‰
local title = Instance.new("TextLabel")
title.Size = UDim2.new(0.7, 0, 1, 0)
title.Position = UDim2.new(0.05, 0, 0, 0)
title.BackgroundTransparency = 1
title.Text = "PLAYBREAK ã€¡ åˆ·ç¥¨"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextSize = 16
title.Font = Enum.Font.GothamBold
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = titleBar

-- å°æ ‡é¢˜æ–‡å­—ï¼ˆç”¨äºæœ€å°åŒ–çŠ¶æ€ï¼‰
local miniTitle = Instance.new("TextLabel")
miniTitle.Size = UDim2.new(0.6, 0, 1, 0)
miniTitle.Position = UDim2.new(0.05, 0, 0, 0)
miniTitle.BackgroundTransparency = 1
miniTitle.Text = "âš¡ PB åˆ·ç¥¨"
miniTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
miniTitle.TextSize = 12  -- è¿›ä¸€æ­¥ç¼©å°æ–‡å­—å¤§å°
miniTitle.Font = Enum.Font.GothamBold
miniTitle.TextXAlignment = Enum.TextXAlignment.Left
miniTitle.Visible = false  -- é»˜è®¤éšè—
miniTitle.Parent = titleBar

-- æœ€å°åŒ–æŒ‰é’®
local minimizeBtn = Instance.new("TextButton")
minimizeBtn.Size = UDim2.new(0, 22, 0, 22)  -- ç¼©å°æŒ‰é’®
minimizeBtn.Position = UDim2.new(0.93, 0, 0.2, 0)
minimizeBtn.BackgroundColor3 = Color3.fromRGB(255, 193, 7)  -- é»„è‰²ï¼Œè¡¨ç¤ºæœ€å°åŒ–
minimizeBtn.Text = "â”€"  -- å‡å·
minimizeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
minimizeBtn.TextSize = 14  -- ç¼©å°æ–‡å­—
minimizeBtn.Font = Enum.Font.GothamBold
minimizeBtn.Parent = titleBar

local minimizeCorner = Instance.new("UICorner")
minimizeCorner.CornerRadius = UDim.new(1, 0)
minimizeCorner.Parent = minimizeBtn

-- çŠ¶æ€æ˜¾ç¤ºåŒºåŸŸ
local statusContainer = Instance.new("Frame")
statusContainer.Size = UDim2.new(1, -20, 0, 70)
statusContainer.Position = UDim2.new(0, 10, 0, 55)
statusContainer.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
statusContainer.BorderSizePixel = 0
statusContainer.Parent = panel

local statusCorner = Instance.new("UICorner")
statusCorner.CornerRadius = UDim.new(0, 8)
statusCorner.Parent = statusContainer

-- çŠ¶æ€æ ‡é¢˜
local statusTitle = Instance.new("TextLabel")
statusTitle.Size = UDim2.new(1, 0, 0, 22)
statusTitle.Position = UDim2.new(0, 0, 0, 0)
statusTitle.BackgroundTransparency = 1
statusTitle.Text = "  ğŸ“Š çŠ¶æ€"
statusTitle.TextColor3 = Color3.fromRGB(200, 200, 255)
statusTitle.TextSize = 13
statusTitle.Font = Enum.Font.GothamBold
statusTitle.TextXAlignment = Enum.TextXAlignment.Left
statusTitle.Parent = statusContainer

-- çŠ¶æ€åˆ†éš”çº¿
local statusDivider = Instance.new("Frame")
statusDivider.Size = UDim2.new(1, -20, 0, 1)
statusDivider.Position = UDim2.new(0, 10, 0, 22)
statusDivider.BackgroundColor3 = Color3.fromRGB(80, 80, 100)
statusDivider.BorderSizePixel = 0
statusDivider.Parent = statusContainer

-- çŠ¶æ€æ–‡å­—
local statusText = Instance.new("TextLabel")
statusText.Size = UDim2.new(1, -20, 0, 44)
statusText.Position = UDim2.new(0, 10, 0, 24)
statusText.BackgroundTransparency = 1
statusText.Text = "ğŸŸ¢ å·¥å…·ç®±å°±ç»ª\nå¿«æ·é”®: F1-F4"
statusText.TextColor3 = Color3.fromRGB(220, 220, 220)
statusText.TextSize = 12
statusText.Font = Enum.Font.Gotham
statusText.TextWrapped = true
statusText.TextXAlignment = Enum.TextXAlignment.Left
statusText.TextYAlignment = Enum.TextYAlignment.Top
statusText.Parent = statusContainer

-- æŒ‰é’®å®¹å™¨
local buttonContainer = Instance.new("Frame")
buttonContainer.Size = UDim2.new(1, -20, 0, 200)
buttonContainer.Position = UDim2.new(0, 10, 0, 135)
buttonContainer.BackgroundTransparency = 1
buttonContainer.Parent = panel

-- åˆ›å»ºæŒ‰é’®çš„å‡½æ•°
local function createStyledButton(name, icon, color, position, size)
    local button = Instance.new("Frame")
    button.Size = size
    button.Position = position
    button.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
    button.BorderSizePixel = 0
    button.Parent = buttonContainer
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 6)
    buttonCorner.Parent = button
    
    local buttonBorder = Instance.new("UIStroke")
    buttonBorder.Color = color
    buttonBorder.Thickness = 1.5
    buttonBorder.Parent = button
    
    local buttonContent = Instance.new("TextButton")
    buttonContent.Size = UDim2.new(1, 0, 1, 0)
    buttonContent.BackgroundTransparency = 1
    buttonContent.Text = ""
    buttonContent.AutoButtonColor = false
    buttonContent.Parent = button
    
    local buttonIcon = Instance.new("TextLabel")
    buttonIcon.Size = UDim2.new(0, 26, 1, 0)
    buttonIcon.Position = UDim2.new(0, 8, 0, 0)
    buttonIcon.BackgroundTransparency = 1
    buttonIcon.Text = icon
    buttonIcon.TextColor3 = color
    buttonIcon.TextSize = 20
    buttonIcon.Font = Enum.Font.GothamBold
    buttonIcon.TextXAlignment = Enum.TextXAlignment.Left
    buttonIcon.Parent = buttonContent
    
    local buttonLabel = Instance.new("TextLabel")
    buttonLabel.Size = UDim2.new(1, -42, 1, 0)
    buttonLabel.Position = UDim2.new(0, 42, 0, 0)
    buttonLabel.BackgroundTransparency = 1
    buttonLabel.Text = name
    buttonLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    buttonLabel.TextSize = 14
    buttonLabel.Font = Enum.Font.GothamBold
    buttonLabel.TextXAlignment = Enum.TextXAlignment.Left
    buttonLabel.Parent = buttonContent
    
    local buttonHover = Instance.new("Frame")
    buttonHover.Size = UDim2.new(1, 0, 1, 0)
    buttonHover.BackgroundColor3 = color
    buttonHover.BackgroundTransparency = 0.9
    buttonHover.BorderSizePixel = 0
    buttonHover.Visible = false
    buttonHover.Parent = buttonContent
    
    local hoverCorner = Instance.new("UICorner")
    hoverCorner.CornerRadius = UDim.new(0, 6)
    hoverCorner.Parent = buttonHover
    
    buttonContent.MouseEnter:Connect(function()
        buttonHover.Visible = true
        buttonBorder.Thickness = 2
    end)
    
    buttonContent.MouseLeave:Connect(function()
        buttonHover.Visible = false
        buttonBorder.Thickness = 1.5
    end)
    
    return buttonContent
end

-- åˆ›å»ºæŒ‰é’®
local cleanBtn = createStyledButton("å¼€å§‹æ‰§è¡Œï¼ˆæ¸…ç†è„šæœ¬ï¼‰", "â–¶ï¸", Color3.fromRGB(76, 175, 80),
    UDim2.new(0, 0, 0, 0), UDim2.new(1, 0, 0, 50))

local instantBtn = createStyledButton("å¿«é€Ÿè‡ªæ•‘ï¼ˆç§’äº’åŠ¨ï¼‰", "â©ï¸", Color3.fromRGB(0, 150, 255),
    UDim2.new(0, 0, 0, 55), UDim2.new(1, 0, 0, 50))

local autoInteractBtn = createStyledButton("è‡ªåŠ¨è‡ªæ•‘ï¼ˆè‡ªåŠ¨äº’åŠ¨ï¼‰", "â¸ï¸", Color3.fromRGB(156, 39, 176),
    UDim2.new(0, 0, 0, 110), UDim2.new(1, 0, 0, 50))

local closeUIBtn = createStyledButton("å…³é—­ç•Œé¢", "âŒ", Color3.fromRGB(200, 50, 50),
    UDim2.new(0, 0, 0, 165), UDim2.new(1, 0, 0, 50))

-- åº•éƒ¨ä¿¡æ¯æ 
local footer = Instance.new("Frame")
footer.Size = UDim2.new(1, -20, 0, 25)
footer.Position = UDim2.new(0, 10, 1, -30)
footer.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
footer.BorderSizePixel = 0
footer.Parent = panel

local footerCorner = Instance.new("UICorner")
footerCorner.CornerRadius = UDim.new(0, 6)
footerCorner.Parent = footer

local footerText = Instance.new("TextLabel")
footerText.Size = UDim2.new(1, 0, 1, 0)
footerText.BackgroundTransparency = 1
footerText.Text = "âœ¨ æ¸”ç‚’é±¼ | F1-F4 å¿«æ·é”®"
footerText.TextColor3 = Color3.fromRGB(180, 180, 200)
footerText.TextSize = 11
footerText.Font = Enum.Font.Gotham
footerText.Parent = footer

-- æ‹–åŠ¨åŠŸèƒ½
local dragging = false
local dragStart, startPos

titleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = panel.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        panel.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- è·Ÿè¸ªæœ€å°åŒ–çŠ¶æ€
local isMinimized = false

-- æœ€å°åŒ–æŒ‰é’®åŠŸèƒ½ï¼ˆç‚¹å‡»å‡å·ç¼©å°ç•Œé¢ï¼‰
minimizeBtn.MouseButton1Click:Connect(function()
    if isMinimized then
        -- æ¢å¤åŸçŠ¶
        isMinimized = false
        minimizeBtn.Text = "â”€"  -- ä¿æŒå‡å·
        minimizeBtn.BackgroundColor3 = Color3.fromRGB(255, 193, 7)  -- é»„è‰²
        minimizeBtn.Size = UDim2.new(0, 22, 0, 22)  -- æ¢å¤æŒ‰é’®å¤§å°
        minimizeBtn.Position = UDim2.new(0.93, 0, 0.2, 0)  -- æ¢å¤ä½ç½®
        
        -- æ˜¾ç¤ºæ‰€æœ‰å†…å®¹
        statusContainer.Visible = true
        buttonContainer.Visible = true
        footer.Visible = true
        title.Visible = true
        miniTitle.Visible = false
        versionLabel.Visible = true
        
        -- æ¢å¤æ ‡é¢˜æ å¤§å°
        titleBar.Size = UDim2.new(1, 0, 0, 45)
        
        -- åŠ¨ç”»æ¢å¤å¤§å°å’Œä½ç½®
        local tween = TweenService:Create(panel, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            Size = originalPanelSize,
            Position = originalPosition  -- æ¢å¤åŸå§‹ä½ç½®
        })
        tween:Play()
        
        statusText.Text = "ğŸŸ¢ å·¥å…·ç®±å·²å±•å¼€"
        
    else
        -- æœ€å°åŒ–
        isMinimized = true
        minimizeBtn.Text = "+"  -- å˜æˆåŠ å·ï¼Œè¡¨ç¤ºå¯ä»¥å±•å¼€
        minimizeBtn.BackgroundColor3 = Color3.fromRGB(76, 175, 80)  -- ç»¿è‰²
        minimizeBtn.Size = UDim2.new(0, 18, 0, 18)  -- ç¼©å°æŒ‰é’®
        minimizeBtn.Position = UDim2.new(0.93, 0, 0.1, 0)  -- è°ƒæ•´ä½ç½®
        
        -- éšè—å†…å®¹ï¼Œåªä¿ç•™æ ‡é¢˜æ 
        statusContainer.Visible = false
        buttonContainer.Visible = false
        footer.Visible = false
        title.Visible = false
        versionLabel.Visible = false
        miniTitle.Visible = true  -- æ˜¾ç¤ºå°æ ‡é¢˜
        
        -- ç¼©å°æ ‡é¢˜æ 
        titleBar.Size = UDim2.new(1, 0, 1, 0)  -- å æ®æ•´ä¸ªé¢æ¿
        
        -- åŠ¨ç”»ç¼©å°
        local tween = TweenService:Create(panel, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            Size = minimizedPanelSize,
            Position = UDim2.new(0.05, 10, 0.1, 10)  -- ç¼©å°åç§»åŠ¨åˆ°å·¦ä¸Šè§’é™„è¿‘
        })
        tween:Play()
        
        -- ä¿å­˜çŠ¶æ€æ–‡æœ¬
        statusText.Text = "ğŸ“¦ å·¥å…·ç®±å·²æœ€å°åŒ–"
    end
end)

-- ===========================================
-- æŒ‰é’®åŠŸèƒ½å®ç°
-- ===========================================

-- æ¸…ç†è„šæœ¬åŠŸèƒ½
cleanBtn.MouseButton1Click:Connect(function()
    statusText.Text = "æ‰«æä¸­..."
    statusText.TextColor3 = Color3.fromRGB(255, 200, 100)
    
    spawn(function()
        local character = localPlayer.Character
        if not character then
            statusText.Text = "ğŸ”´ é”™è¯¯ï¼šè§’è‰²ä¸å­˜åœ¨"
            statusText.TextColor3 = Color3.fromRGB(255, 100, 100)
            wait(2)
            statusText.Text = "ğŸŸ¢ å°±ç»ª"
            statusText.TextColor3 = Color3.fromRGB(220, 220, 220)
            return
        end
        
        wait(0.1)
        
        local removedCount = 0
        local scripts = character:GetDescendants()
        
        for _, obj in ipairs(scripts) do
            if obj:IsA("Script") or obj:IsA("LocalScript") then
                pcall(function()
                    obj:Destroy()
                    removedCount = removedCount + 1
                end)
            end
        end
        
        statusText.Text = string.format("âœ… æ¸…ç†å®Œæˆ\nç§»é™¤äº† %d ä¸ªè„šæœ¬", removedCount)
        statusText.TextColor3 = Color3.fromRGB(100, 255, 100)
        
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "æ¸…ç†å®Œæˆ",
            Text = string.format("ç§»é™¤äº† %d ä¸ªè„šæœ¬", removedCount),
            Duration = 3,
            Icon = "rbxassetid://139532409537387"
        })
        
        wait(3)
        statusText.Text = "ğŸŸ¢ å°±ç»ª"
        statusText.TextColor3 = Color3.fromRGB(220, 220, 220)
    end)
end)

-- ç§’äº’åŠ¨åŠŸèƒ½
local instantInteractionEnabled = false

instantBtn.MouseButton1Click:Connect(function()
    if instantInteractionEnabled then
        statusText.Text = "âš ï¸ ç§’äº’åŠ¨å·²å¯ç”¨"
        return
    end
    
    statusText.Text = "ğŸ”„ å¯ç”¨ç§’äº’åŠ¨..."
    statusText.TextColor3 = Color3.fromRGB(100, 200, 255)
    
    spawn(function()
        local success = pcall(function()
            -- ç®€å•çš„ç§’äº’åŠ¨å®ç°
            instantInteractionEnabled = true
            
            local mouse = localPlayer:GetMouse()
            
            mouse.Button1Down:Connect(function()
                local target = mouse.Target
                if target then
                    -- ç‚¹å‡»æ¢æµ‹å™¨
                    local clicker = target:FindFirstChildOfClass("ClickDetector")
                    if clicker then
                        pcall(fireclickdetector, clicker)
                    end
                    
                    -- è¿‘è·ç¦»æç¤º
                    local prompt = target:FindFirstChildOfClass("ProximityPrompt")
                    if prompt then
                        pcall(function()
                            prompt.HoldDuration = 0
                            prompt.MaxActivationDistance = 50
                            prompt:InputHoldBegin()
                            task.wait(0.01)
                            prompt:InputHoldEnd()
                        end)
                    end
                end
            end)
        end)
        
        if success then
            statusText.Text = "âœ… ç§’äº’åŠ¨å·²å¯ç”¨\nç‚¹å‡»å³å¯å¿«é€Ÿäº’åŠ¨"
            statusText.TextColor3 = Color3.fromRGB(100, 255, 100)
            
            game:GetService("StarterGui"):SetCore("SendNotification", {
                Title = "ç§’äº’åŠ¨",
                Text = "å·²å¯ç”¨ï¼ç‚¹å‡»ç‰©ä½“å³å¯å¿«é€Ÿäº’åŠ¨",
                Duration = 3,
                Icon = "rbxassetid://7734068321"
            })
        else
            statusText.Text = "âŒ å¯ç”¨å¤±è´¥"
            statusText.TextColor3 = Color3.fromRGB(255, 100, 100)
        end
        
        wait(3)
        statusText.Text = "ğŸŸ¢ å°±ç»ª"
        statusText.TextColor3 = Color3.fromRGB(220, 220, 220)
    end)
end)

-- ===========================================
-- è‡ªåŠ¨äº’åŠ¨åŠŸèƒ½ï¼ˆä¼˜åŒ–ç‰ˆï¼‰
-- ===========================================
local autoInteractEnabled = false
local autoInteractConnection = nil
local lastInteractTime = 0
local interactCache = {}  -- ç¼“å­˜å·²äº¤äº’çš„å¯¹è±¡
local interactCacheTTL = 5  -- ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰

-- ä¼˜åŒ–çš„è‡ªåŠ¨äº’åŠ¨å‡½æ•°
local function optimizedAutoInteract()
    if not autoInteractEnabled then return end
    
    local character = localPlayer.Character
    if not character then return end
    
    local root = character:FindFirstChild("HumanoidRootPart")
    if not root then return end
    
    local currentTime = tick()
    local interacted = 0
    
    -- æ¸…ç†è¿‡æœŸç¼“å­˜
    for objectId, cacheTime in pairs(interactCache) do
        if currentTime - cacheTime > interactCacheTTL then
            interactCache[objectId] = nil
        end
    end
    
    -- ä½¿ç”¨å±€éƒ¨å˜é‡æé«˜æ€§èƒ½
    local workspaceDescendants = workspace:GetDescendants()
    local rootPosition = root.Position
    local maxDistance = 25  -- æœ€å¤§è·ç¦»
    
    -- æ¯æ¬¡å¤„ç†å›ºå®šæ•°é‡çš„å¯¹è±¡ï¼Œé¿å…å¡é¡¿
    local batchSize = 30  -- æ¯å¸§å¤„ç†30ä¸ªå¯¹è±¡
    local processedCount = 0
    
    for _, obj in ipairs(workspaceDescendants) do
        if not autoInteractEnabled then break end
        
        -- æ‰¹é‡å¤„ç†æ§åˆ¶
        if processedCount >= batchSize then
            break
        end
        
        if obj:IsA("ClickDetector") then
            processedCount = processedCount + 1
            
            -- æ£€æŸ¥ç¼“å­˜ï¼Œé¿å…é‡å¤äº¤äº’
            local objectId = tostring(obj)
            local lastInteract = interactCache[objectId]
            
            if lastInteract and (currentTime - lastInteract < 1) then  -- 1ç§’å†…ä¸é‡å¤äº¤äº’
                break
            end
            
            local distance = 0
            local parent = obj.Parent
            if parent and parent:IsA("BasePart") then
                distance = (rootPosition - parent.Position).Magnitude
            end
            
            if distance <= maxDistance then
                -- å°è¯•äº¤äº’
                local success = pcall(fireclickdetector, obj)
                if success then
                    interacted = interacted + 1
                    interactCache[objectId] = currentTime  -- è®°å½•äº¤äº’æ—¶é—´
                end
            end
        elseif obj:IsA("ProximityPrompt") then
            processedCount = processedCount + 1
            
            -- æ£€æŸ¥ç¼“å­˜
            local objectId = tostring(obj)
            local lastInteract = interactCache[objectId]
            
            if lastInteract and (currentTime - lastInteract < 0.5) then  -- 0.5ç§’å†…ä¸é‡å¤äº¤äº’
                break
            end
            
            local parent = obj.Parent
            if parent and parent:IsA("BasePart") then
                local distance = (rootPosition - parent.Position).Magnitude
                if distance <= maxDistance and obj.Enabled then
                    pcall(function()
                        obj.HoldDuration = 0
                        obj:InputHoldBegin()
                        task.wait(0.001)  -- æ›´çŸ­çš„ç­‰å¾…
                        obj:InputHoldEnd()
                        interactCache[objectId] = currentTime
                        interacted = interacted + 1
                    end)
                end
            end
        end
    end
    
    if interacted > 0 then
        statusText.Text = string.format("è‡ªåŠ¨äº’åŠ¨ä¸­\n%d ä¸ªç‰©ä½“", interacted)
        statusText.TextColor3 = Color3.fromRGB(200, 100, 255)
        lastInteractTime = currentTime
    end
end

-- ä¼˜åŒ–åçš„è¿æ¥å¤„ç†
autoInteractBtn.MouseButton1Click:Connect(function()
    if autoInteractEnabled then
        -- åœæ­¢è‡ªåŠ¨äº’åŠ¨
        autoInteractEnabled = false
        if autoInteractConnection then
            autoInteractConnection:Disconnect()
            autoInteractConnection = nil
        end
        -- æ¸…ç©ºç¼“å­˜
        interactCache = {}
        
        statusText.Text = "è‡ªåŠ¨äº’åŠ¨å·²åœæ­¢"
        statusText.TextColor3 = Color3.fromRGB(200, 200, 200)
        
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "è‡ªåŠ¨äº’åŠ¨",
            Text = "å·²åœæ­¢",
            Duration = 2,
            Icon = "rbxassetid://7734068321"
        })
    else
        -- å¯åŠ¨è‡ªåŠ¨äº’åŠ¨
        autoInteractEnabled = true
        statusText.Text = "å¯åŠ¨è‡ªåŠ¨äº’åŠ¨..."
        statusText.TextColor3 = Color3.fromRGB(200, 100, 255)
        
        -- ä½¿ç”¨Steppedä»£æ›¿Heartbeatï¼Œæ€§èƒ½æ›´å¥½
        spawn(function()
            autoInteractConnection = RunService.Stepped:Connect(function()
                if not autoInteractEnabled then return end
                
                -- é™åˆ¶æ‰§è¡Œé¢‘ç‡ï¼Œæ¯0.05ç§’æ‰§è¡Œä¸€æ¬¡ï¼ˆ20æ¬¡/ç§’ï¼‰
                local currentTime = tick()
                if currentTime - lastInteractTime >= 0.05 then
                    optimizedAutoInteract()
                end
            end)
            
            wait(0.5)
            if autoInteractEnabled then
                statusText.Text = "âœ… è‡ªåŠ¨äº’åŠ¨å·²å¯ç”¨\né«˜æ€§èƒ½æ¨¡å¼"
                statusText.TextColor3 = Color3.fromRGB(100, 255, 100)
                
                game:GetService("StarterGui"):SetCore("SendNotification", {
                    Title = "è‡ªåŠ¨äº’åŠ¨",
                    Text = "å·²å¯ç”¨ï¼é«˜æ€§èƒ½æ¨¡å¼è¿è¡Œ",
                    Duration = 3,
                    Icon = "rbxassetid://7734068321"
                })
            end
        end)
    end
end)

-- å…³é—­ç•Œé¢åŠŸèƒ½ï¼ˆå®Œå…¨å…³é—­å·¥å…·ç®±ï¼‰
closeUIBtn.MouseButton1Click:Connect(function()
    -- åœæ­¢è‡ªåŠ¨äº’åŠ¨
    if autoInteractEnabled then
        autoInteractEnabled = false
        if autoInteractConnection then
            autoInteractConnection:Disconnect()
            autoInteractConnection = nil
        end
        interactCache = {}  -- æ¸…ç©ºç¼“å­˜
    end
    
    statusText.Text = "å…³é—­ä¸­..."
    
    -- æ·¡å‡ºåŠ¨ç”»
    local tween = TweenService:Create(panel, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        Position = UDim2.new(0.5, -150, -0.5, -180),
        BackgroundTransparency = 1
    })
    tween:Play()
    
    tween.Completed:Wait()
    ui:Destroy()
    
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "æç¤º",
        Text = "å·¥å…·ç®±å·²å®Œå…¨å…³é—­",
        Duration = 2
    })
end)

-- ===========================================
-- å¿«æ·é”®åŠŸèƒ½
-- ===========================================
UserInputService.InputBegan:Connect(function(input, processed)
    if processed then return end
    
    if input.KeyCode == Enum.KeyCode.F1 then
        cleanBtn:MouseButton1Click()
    elseif input.KeyCode == Enum.KeyCode.F2 then
        instantBtn:MouseButton1Click()
    elseif input.KeyCode == Enum.KeyCode.F3 then
        autoInteractBtn:MouseButton1Click()
    elseif input.KeyCode == Enum.KeyCode.F4 then
        -- F4åˆ‡æ¢æœ€å°åŒ–/æ¢å¤
        minimizeBtn:MouseButton1Click()
    end
end)

-- ===========================================
-- åˆå§‹åŒ–å®Œæˆ
-- ===========================================
print("ğŸ® PLAYBREAKåˆ·ç¥¨ v3.0 å·²åŠ è½½")
print("ğŸ“‹ å¿«æ·é”®:")
print("  F1 - å¼€å§‹æ‰§è¡Œï¼ˆæ¸…ç†è„šæœ¬ï¼‰")
print("  F2 - å¿«é€Ÿè‡ªæ•‘ï¼ˆç§’äº’åŠ¨ï¼‰")
print("  F3 - è‡ªåŠ¨è‡ªæ•‘ï¼ˆè‡ªåŠ¨äº’åŠ¨ï¼‰")
print("  F4 - æœ€å°åŒ–/æ¢å¤ç•Œé¢")

game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "åŠ è½½æˆåŠŸ",
    Text = "PLAYBREAKå·¥å…·ç®±å·²åŠ è½½\nå·¦ä¸Šè§’æ‚¬æµ®çª—å·²å°±ç»ª",
    Duration = 5,
    Icon = "rbxassetid://111333374680640"
})