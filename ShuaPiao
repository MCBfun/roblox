game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "å…¬å‘Š",
    Text = "ç»™ä¸ªä¸‰è¿å§ï¼",
    Icon = "rbxassetid://139532409537387",
    Duration = 2,
    Position = UDim2.new(0, 20, 1, -50)
})
game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "å…¬å‘Š",
    Text = "æ¸”ç‚’é±¼",
    Icon = "rbxassetid://28872862",
    Duration = 3,
    Position = UDim2.new(0, 20, 1, -50)
})

-- æ£€æŸ¥æœ¬åœ°ç©å®¶
local Players = game:GetService("Players")
local localPlayer
local success, err = pcall(function()
    localPlayer = Players.LocalPlayer
end)

if not success then
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "é”™è¯¯",
        Text = "æ— æ³•è·å–æœ¬åœ°ç©å®¶",
        Duration = 5
    })
    return
end

-- ç­‰å¾…PlayerGui
local PlayerGui
local success2, err2 = pcall(function()
    PlayerGui = localPlayer:WaitForChild("PlayerGui", 10)
end)

if not success2 then
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "é”™è¯¯",
        Text = "æ— æ³•åŠ è½½ç©å®¶ç•Œé¢",
        Duration = 5
    })
    return
end

local UserInputService = game:GetService("UserInputService")

-- åˆ›å»ºUI
local ui = Instance.new("ScreenGui")
ui.Name = "PlaybreakToolbox"
ui.Parent = PlayerGui
ui.IgnoreGuiInset = false
ui.ResetOnSpawn = false

-- æµ®åŠ¨æŒ‰é’®ï¼ˆç”¨äºé‡æ–°æ‰“å¼€UIï¼‰- ç¼©å°å°ºå¯¸
local floatButton = Instance.new("ImageButton")
floatButton.Size = UDim2.new(0, 50, 0, 50)  -- ä»60ç¼©å°åˆ°50
floatButton.Position = UDim2.new(0, 15, 0.9, 0)  -- ç§»åˆ°æ›´ä¸‹æ–¹ï¼Œç•™å‡ºç©ºé—´
floatButton.BackgroundColor3 = Color3.fromRGB(30, 136, 229)
floatButton.Image = "rbxassetid://3926305904"
floatButton.ImageRectOffset = Vector2.new(884, 4)
floatButton.ImageRectSize = Vector2.new(36, 36)
floatButton.Visible = true
floatButton.Parent = ui

-- æµ®åŠ¨æŒ‰é’®åœ†è§’
local floatCorner = Instance.new("UICorner")
floatCorner.CornerRadius = UDim.new(1, 0)
floatCorner.Parent = floatButton

-- æµ®åŠ¨æŒ‰é’®å‘å…‰æ•ˆæœ
local floatGlow = Instance.new("Frame")
floatGlow.Size = UDim2.new(1, 0, 1, 0)
floatGlow.BackgroundColor3 = Color3.fromRGB(30, 136, 229)
floatGlow.BackgroundTransparency = 0.8
floatGlow.BorderSizePixel = 0
floatGlow.Parent = floatButton

local floatGlowCorner = Instance.new("UICorner")
floatGlowCorner.CornerRadius = UDim.new(1, 0)
floatGlowCorner.Parent = floatGlow

-- æµ®åŠ¨æŒ‰é’®æ‚¬åœåŠ¨ç”»
local floatHoverAnimation = game:GetService("TweenService"):Create(floatGlow, 
    TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
    {BackgroundTransparency = 0.6}
)
local floatNormalAnimation = game:GetService("TweenService"):Create(floatGlow,
    TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
    {BackgroundTransparency = 0.8}
)

-- ä¸»é¢æ¿ - ç¼©å°å°ºå¯¸
local panel = Instance.new("Frame")
panel.Size = UDim2.new(0, 300, 0, 360)  -- ä»350x400ç¼©å°åˆ°300x360
panel.Position = UDim2.new(0.5, -150, 0.5, -180)
panel.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
panel.BorderSizePixel = 0
panel.Parent = ui

-- æ·»åŠ åœ†è§’æ•ˆæœ
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = panel

-- æ·»åŠ é˜´å½±æ•ˆæœ
local shadow = Instance.new("UIStroke")
shadow.Color = Color3.fromRGB(0, 150, 255)
shadow.Thickness = 2
shadow.Parent = panel

-- æ ‡é¢˜æ  - ç¼©å°é«˜åº¦
local titleBar = Instance.new("Frame")
titleBar.Size = UDim2.new(1, 0, 0, 45)  -- ä»50ç¼©å°åˆ°45
titleBar.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
titleBar.BorderSizePixel = 0
titleBar.Parent = panel

local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 10)
titleCorner.Parent = titleBar

-- æ ‡é¢˜æ æ¸å˜æ•ˆæœ
local titleGradient = Instance.new("UIGradient")
titleGradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(30, 136, 229)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(100, 77, 245)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(30, 136, 229))
})
titleGradient.Rotation = 90
titleGradient.Parent = titleBar

-- æ ‡é¢˜æ–‡å­— - ç¼©å°å­—å·
local title = Instance.new("TextLabel")
title.Size = UDim2.new(0.7, 0, 1, 0)
title.Position = UDim2.new(0.05, 0, 0, 0)
title.BackgroundTransparency = 1
title.Text = "âš¡ PLAYBREAK å·¥å…·ç®± âš¡"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextSize = 16  -- ä»18ç¼©å°åˆ°16
title.Font = Enum.Font.GothamBold
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = titleBar

-- ç‰ˆæœ¬ä¿¡æ¯ - ç¼©å°å­—å·
local versionLabel = Instance.new("TextLabel")
versionLabel.Size = UDim2.new(0.25, 0, 1, 0)
versionLabel.Position = UDim2.new(0.75, 0, 0, 0)
versionLabel.BackgroundTransparency = 1
versionLabel.Text = "v2.0"
versionLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
versionLabel.TextSize = 11  -- ä»12ç¼©å°åˆ°11
versionLabel.Font = Enum.Font.Gotham
versionLabel.TextXAlignment = Enum.TextXAlignment.Right
versionLabel.Parent = titleBar

-- å…³é—­æŒ‰é’® - ç¼©å°å°ºå¯¸
local closeBtn = Instance.new("ImageButton")
closeBtn.Size = UDim2.new(0, 28, 0, 28)  -- ä»32ç¼©å°åˆ°28
closeBtn.Position = UDim2.new(0.92, 0, 0.2, 0)  -- è°ƒæ•´ä½ç½®
closeBtn.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
closeBtn.Image = "rbxassetid://3926305904"
closeBtn.ImageRectOffset = Vector2.new(284, 4)
closeBtn.ImageRectSize = Vector2.new(24, 24)
closeBtn.Parent = titleBar

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(1, 0)
closeCorner.Parent = closeBtn

-- çŠ¶æ€æ˜¾ç¤ºåŒºåŸŸ - ç¼©å°é«˜åº¦
local statusContainer = Instance.new("Frame")
statusContainer.Size = UDim2.new(1, -20, 0, 70)  -- ä»80ç¼©å°åˆ°70
statusContainer.Position = UDim2.new(0, 10, 0, 55)  -- è°ƒæ•´ä½ç½®
statusContainer.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
statusContainer.BorderSizePixel = 0
statusContainer.Parent = panel

local statusCorner = Instance.new("UICorner")
statusCorner.CornerRadius = UDim.new(0, 8)
statusCorner.Parent = statusContainer

-- çŠ¶æ€æ ‡é¢˜ - ç¼©å°å­—å·
local statusTitle = Instance.new("TextLabel")
statusTitle.Size = UDim2.new(1, 0, 0, 22)  -- ä»25ç¼©å°åˆ°22
statusTitle.Position = UDim2.new(0, 0, 0, 0)
statusTitle.BackgroundTransparency = 1
statusTitle.Text = "ğŸ“Š ç³»ç»ŸçŠ¶æ€"
statusTitle.TextColor3 = Color3.fromRGB(200, 200, 255)
statusTitle.TextSize = 13  -- ä»14ç¼©å°åˆ°13
statusTitle.Font = Enum.Font.GothamBold
statusTitle.TextXAlignment = Enum.TextXAlignment.Left
statusTitle.Parent = statusContainer

-- çŠ¶æ€åˆ†éš”çº¿
local statusDivider = Instance.new("Frame")
statusDivider.Size = UDim2.new(1, -20, 0, 1)
statusDivider.Position = UDim2.new(0, 10, 0, 22)  -- è°ƒæ•´ä½ç½®
statusDivider.BackgroundColor3 = Color3.fromRGB(80, 80, 100)
statusDivider.BorderSizePixel = 0
statusDivider.Parent = statusContainer

-- çŠ¶æ€æ–‡å­— - ç¼©å°å­—å·
local statusText = Instance.new("TextLabel")
statusText.Size = UDim2.new(1, -20, 0, 44)  -- ä»50ç¼©å°åˆ°44
statusText.Position = UDim2.new(0, 10, 0, 26)  -- è°ƒæ•´ä½ç½®
statusText.BackgroundTransparency = 1
statusText.Text = "ğŸŸ¢ ç³»ç»Ÿå°±ç»ª\né€‰æ‹©åŠŸèƒ½å¼€å§‹ä½¿ç”¨"
statusText.TextColor3 = Color3.fromRGB(220, 220, 220)
statusText.TextSize = 12  -- ä»13ç¼©å°åˆ°12
statusText.Font = Enum.Font.Gotham
statusText.TextWrapped = true
statusText.TextXAlignment = Enum.TextXAlignment.Left
statusText.TextYAlignment = Enum.TextYAlignment.Top
statusText.Parent = statusContainer

-- æŒ‰é’®å®¹å™¨ - è°ƒæ•´ä½ç½®å’Œå¤§å°
local buttonContainer = Instance.new("Frame")
buttonContainer.Size = UDim2.new(1, -20, 0, 200)  -- ä»240ç¼©å°åˆ°200
buttonContainer.Position = UDim2.new(0, 10, 0, 135)  -- è°ƒæ•´ä½ç½®
buttonContainer.BackgroundTransparency = 1
buttonContainer.Parent = panel

-- æŒ‰é’®æ ·å¼å‡½æ•°ï¼ˆç®€åŒ–ç‰ˆï¼Œç¼©å°å°ºå¯¸ï¼‰
local function createStyledButton(name, icon, color, position, size)
    local button = Instance.new("Frame")
    button.Size = size
    button.Position = position
    button.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
    button.BorderSizePixel = 0
    button.Parent = buttonContainer
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 6)  -- ä»8ç¼©å°åˆ°6
    buttonCorner.Parent = button
    
    -- æŒ‰é’®è¾¹æ¡†
    local buttonBorder = Instance.new("UIStroke")
    buttonBorder.Color = color
    buttonBorder.Thickness = 1.5  -- ä»2ç¼©å°åˆ°1.5
    buttonBorder.Parent = button
    
    -- æŒ‰é’®å†…å®¹
    local buttonContent = Instance.new("TextButton")
    buttonContent.Size = UDim2.new(1, 0, 1, 0)
    buttonContent.BackgroundTransparency = 1
    buttonContent.Text = ""
    buttonContent.AutoButtonColor = false
    buttonContent.Parent = button
    
    -- å›¾æ ‡ - ç¼©å°
    local buttonIcon = Instance.new("TextLabel")
    buttonIcon.Size = UDim2.new(0, 26, 1, 0)  -- ä»30ç¼©å°åˆ°26
    buttonIcon.Position = UDim2.new(0, 8, 0, 0)  -- ä»10ç¼©å°åˆ°8
    buttonIcon.BackgroundTransparency = 1
    buttonIcon.Text = icon
    buttonIcon.TextColor3 = color
    buttonIcon.TextSize = 20  -- ä»24ç¼©å°åˆ°20
    buttonIcon.Font = Enum.Font.GothamBold
    buttonIcon.TextXAlignment = Enum.TextXAlignment.Left
    buttonIcon.Parent = buttonContent
    
    -- æŒ‰é’®æ–‡å­— - ç¼©å°å­—å·
    local buttonLabel = Instance.new("TextLabel")
    buttonLabel.Size = UDim2.new(1, -42, 1, 0)  -- ä»-50è°ƒæ•´åˆ°-42
    buttonLabel.Position = UDim2.new(0, 42, 0, 0)  -- ä»50è°ƒæ•´åˆ°42
    buttonLabel.BackgroundTransparency = 1
    buttonLabel.Text = name
    buttonLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    buttonLabel.TextSize = 14  -- ä»16ç¼©å°åˆ°14
    buttonLabel.Font = Enum.Font.GothamBold
    buttonLabel.TextXAlignment = Enum.TextXAlignment.Left
    buttonLabel.Parent = buttonContent
    
    -- æŒ‰é’®æ‚¬åœæ•ˆæœ
    local buttonHover = Instance.new("Frame")
    buttonHover.Size = UDim2.new(1, 0, 1, 0)
    buttonHover.BackgroundColor3 = color
    buttonHover.BackgroundTransparency = 0.9
    buttonHover.BorderSizePixel = 0
    buttonHover.Visible = false
    buttonHover.Parent = buttonContent
    
    local hoverCorner = Instance.new("UICorner")
    hoverCorner.CornerRadius = UDim.new(0, 6)  -- ä»8ç¼©å°åˆ°6
    hoverCorner.Parent = buttonHover
    
    -- æ‚¬åœåŠ¨ç”»
    local hoverAnimation = game:GetService("TweenService"):Create(buttonHover, 
        TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
        {BackgroundTransparency = 0.8}
    )
    local unhoverAnimation = game:GetService("TweenService"):Create(buttonHover,
        TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
        {BackgroundTransparency = 1}
    )
    
    buttonContent.MouseEnter:Connect(function()
        buttonHover.Visible = true
        hoverAnimation:Play()
        buttonBorder.Thickness = 2  -- ä»3ç¼©å°åˆ°2
    end)
    
    buttonContent.MouseLeave:Connect(function()
        unhoverAnimation:Play()
        wait(0.2)
        if buttonHover.Visible then
            buttonHover.Visible = false
        end
        buttonBorder.Thickness = 1.5  -- ä»2ç¼©å°åˆ°1.5
    end)
    
    return buttonContent
end

-- åˆ›å»ºæŒ‰é’® - ç¼©å°æŒ‰é’®å°ºå¯¸å’Œé—´è·
local cleanBtn = createStyledButton("å¼€å§‹æ‰§è¡Œ", "ğŸ”§", Color3.fromRGB(76, 175, 80),
    UDim2.new(0, 0, 0, 0), UDim2.new(1, 0, 0, 50))  -- ä»60ç¼©å°åˆ°50

local instantBtn = createStyledButton("ç§’äº’åŠ¨", "âš¡", Color3.fromRGB(0, 150, 255),
    UDim2.new(0, 0, 0, 55), UDim2.new(1, 0, 0, 50))  -- é—´è·ä»70ç¼©å°åˆ°55

local autoInteractBtn = createStyledButton("è‡ªåŠ¨äº’åŠ¨", "ğŸ¤–", Color3.fromRGB(156, 39, 176),
    UDim2.new(0, 0, 0, 110), UDim2.new(1, 0, 0, 50))  -- é—´è·ä»140ç¼©å°åˆ°110

local closeUIBtn = createStyledButton("å…³é—­ç•Œé¢", "âŒ", Color3.fromRGB(200, 50, 50),
    UDim2.new(0, 0, 0, 165), UDim2.new(1, 0, 0, 50))  -- é—´è·ä»210ç¼©å°åˆ°165

-- åº•éƒ¨ä¿¡æ¯æ  - ç¼©å°é«˜åº¦
local footer = Instance.new("Frame")
footer.Size = UDim2.new(1, -20, 0, 25)  -- ä»30ç¼©å°åˆ°25
footer.Position = UDim2.new(0, 10, 1, -35)  -- è°ƒæ•´ä½ç½®
footer.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
footer.BorderSizePixel = 0
footer.Parent = panel

local footerCorner = Instance.new("UICorner")
footerCorner.CornerRadius = UDim.new(0, 6)  -- ä»8ç¼©å°åˆ°6
footerCorner.Parent = footer

-- åº•éƒ¨æ–‡å­— - ç¼©å°å­—å·
local footerText = Instance.new("TextLabel")
footerText.Size = UDim2.new(1, 0, 1, 0)
footerText.BackgroundTransparency = 1
footerText.Text = "âœ¨ æ¸”ç‚’é±¼ | F1-F4 å¿«æ·é”®"
footerText.TextColor3 = Color3.fromRGB(180, 180, 200)
footerText.TextSize = 11  -- ä»12ç¼©å°åˆ°11
footerText.Font = Enum.Font.Gotham
footerText.Parent = footer

-- æµ®åŠ¨æŒ‰é’®æ‚¬åœæ•ˆæœ
floatButton.MouseEnter:Connect(function()
    floatHoverAnimation:Play()
end)

floatButton.MouseLeave:Connect(function()
    floatNormalAnimation:Play()
end)

-- æ‹–åŠ¨åŠŸèƒ½
local dragging = false
local dragStart, startPos

titleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = panel.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        panel.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- æµ®åŠ¨æŒ‰é’®ç‚¹å‡»å±•å¼€é¢æ¿
floatButton.MouseButton1Click:Connect(function()
    panel.Visible = true
    floatButton.Visible = false
end)

-- å…³é—­æŒ‰é’®åŠŸèƒ½ï¼ˆå…³é—­é¢æ¿ï¼Œæ˜¾ç¤ºæµ®åŠ¨æŒ‰é’®ï¼‰
closeBtn.MouseButton1Click:Connect(function()
    panel.Visible = false
    floatButton.Visible = true
end)

-- ===========================================
-- å¼€å§‹æ‰§è¡ŒåŠŸèƒ½ï¼ˆæ¸…ç†è„šæœ¬ï¼‰
-- ===========================================
cleanBtn.MouseButton1Click:Connect(function()
    local character = localPlayer.Character
    if not character then
        statusText.Text = "ğŸ”´ é”™è¯¯ï¼šæœªæ‰¾åˆ°è§’è‰²"
        statusText.TextColor3 = Color3.fromRGB(255, 100, 100)
        return
    end
    
    statusText.Text = "ğŸ”„ æ­£åœ¨æ‰«æè§’è‰²è„šæœ¬..."
    statusText.TextColor3 = Color3.fromRGB(255, 200, 100)
    
    -- åœ¨æ–°çº¿ç¨‹ä¸­æ‰§è¡Œ
    spawn(function()
        local success, result = pcall(function()
            -- æ¸…ç†è„šæœ¬
            local removedCount = 0
            local allDescendants = character:GetDescendants()
            
            -- å…ˆç»Ÿè®¡æ€»æ•°
            local totalScripts = 0
            for _, descendant in ipairs(allDescendants) do
                if descendant:IsA("Script") or descendant:IsA("LocalScript") then
                    totalScripts = totalScripts + 1
                end
            end
            
            statusText.Text = string.format("ğŸ“Š æ‰¾åˆ° %d ä¸ªè„šæœ¬\næ­£åœ¨æ¸…ç†...", totalScripts)
            
            -- å¼€å§‹æ¸…ç†
            for i, descendant in ipairs(allDescendants) do
                if descendant:IsA("Script") or descendant:IsA("LocalScript") then
                    descendant:Destroy()
                    removedCount = removedCount + 1
                    
                    -- æ›´æ–°è¿›åº¦
                    if removedCount % 5 == 0 then
                        statusText.Text = string.format("ğŸ”„ æ¸…ç†è¿›åº¦: %d/%d", removedCount, totalScripts)
                    end
                end
                
                -- é¿å…å¡é¡¿
                if i % 20 == 0 then
                    task.wait(0.01)
                end
            end
            
            return removedCount
        end)
        
        if success then
            if type(result) == "number" then
                statusText.Text = string.format("âœ… æ¸…ç†å®Œæˆï¼\nå…±ç§»é™¤ %d ä¸ªè„šæœ¬", result)
                statusText.TextColor3 = Color3.fromRGB(100, 255, 100)
                
                -- å‘é€é€šçŸ¥
                game:GetService("StarterGui"):SetCore("SendNotification", {
                    Title = "æ¸…ç†å®Œæˆ",
                    Text = string.format("ç§»é™¤äº† %d ä¸ªè„šæœ¬", result),
                    Duration = 3,
                    Icon = "rbxassetid://139532409537387"
                })
            else
                statusText.Text = "âŒ é”™è¯¯: " .. tostring(result)
                statusText.TextColor3 = Color3.fromRGB(255, 100, 100)
            end
        else
            statusText.Text = "âŒ æ“ä½œå¤±è´¥: " .. tostring(result)
            statusText.TextColor3 = Color3.fromRGB(255, 100, 100)
        end
        
        task.wait(3)
        statusText.Text = "ğŸŸ¢ ç³»ç»Ÿå°±ç»ª\né€‰æ‹©åŠŸèƒ½å¼€å§‹ä½¿ç”¨"
        statusText.TextColor3 = Color3.fromRGB(220, 220, 220)
    end)
end)

-- ===========================================
-- è‡ªåŠ¨äº’åŠ¨åŠŸèƒ½
-- ===========================================
local autoInteractEnabled = false
local autoInteractConnection = nil
local autoInteractRange = 50

local function scanAndInteract()
    if not autoInteractEnabled then return end
    
    local character = localPlayer.Character
    if not character then return end
    
    local rootPart = character:FindFirstChild("HumanoidRootPart")
    if not rootPart then return end
    
    local interacted = 0
    
    -- æ‰«æèŒƒå›´å†…çš„æ‰€æœ‰äº’åŠ¨ç‰©ä½“
    for _, obj in pairs(workspace:GetDescendants()) do
        if not autoInteractEnabled then break end
        
        local canInteract = false
        
        -- æ£€æŸ¥æ˜¯å¦æ˜¯äº’åŠ¨ç‰©ä½“
        if obj:IsA("ClickDetector") then
            canInteract = true
        elseif obj:IsA("ProximityPrompt") then
            canInteract = true
        elseif obj.Name:lower():find("button") or 
               obj.Name:lower():find("click") or
               obj.Name:lower():find("interact") or
               obj.Name:lower():find("collect") or
               obj.Name:lower():find("pickup") then
            canInteract = true
        end
        
        if canInteract then
            local distance = 0
            if obj:IsA("BasePart") then
                distance = (rootPart.Position - obj.Position).Magnitude
            elseif obj.Parent and obj.Parent:IsA("BasePart") then
                distance = (rootPart.Position - obj.Parent.Position).Magnitude
            end
            
            if distance <= autoInteractRange then
                pcall(function()
                    if obj:IsA("ClickDetector") then
                        fireclickdetector(obj)
                    elseif obj:IsA("ProximityPrompt") then
                        obj:InputHoldBegin()
                        task.wait(0.01)
                        obj:InputHoldEnd()
                    else
                        for _, child in pairs(obj:GetDescendants()) do
                            if child:IsA("ClickDetector") then
                                fireclickdetector(child)
                                break
                            end
                        end
                    end
                end)
                
                interacted = interacted + 1
                
                if interacted % 10 == 0 then
                    task.wait(0.05)
                end
            end
        end
    end
    
    if interacted > 0 and autoInteractEnabled then
        statusText.Text = string.format("ğŸ¤– è‡ªåŠ¨äº’åŠ¨ä¸­...\nå·²äº’åŠ¨: %d ä¸ªç‰©ä½“", interacted)
        statusText.TextColor3 = Color3.fromRGB(200, 100, 255)
    end
end

local function toggleAutoInteract()
    if autoInteractEnabled then
        -- å…³é—­è‡ªåŠ¨äº’åŠ¨
        autoInteractEnabled = false
        if autoInteractConnection then
            autoInteractConnection:Disconnect()
            autoInteractConnection = nil
        end
        
        statusText.Text = "âœ… è‡ªåŠ¨äº’åŠ¨å·²åœæ­¢"
        statusText.TextColor3 = Color3.fromRGB(200, 200, 200)
        
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "è‡ªåŠ¨äº’åŠ¨",
            Text = "å·²åœæ­¢",
            Duration = 2,
            Icon = "rbxassetid://7734068321"
        })
    else
        -- å¯ç”¨è‡ªåŠ¨äº’åŠ¨
        autoInteractEnabled = true
        
        statusText.Text = "ğŸ”„ æ­£åœ¨å¯åŠ¨è‡ªåŠ¨äº’åŠ¨..."
        statusText.TextColor3 = Color3.fromRGB(200, 100, 255)
        
        -- å¯åŠ¨è‡ªåŠ¨äº’åŠ¨å¾ªç¯
        autoInteractConnection = game:GetService("RunService").Heartbeat:Connect(function()
            if autoInteractEnabled then
                scanAndInteract()
            end
        end)
        
        -- æˆåŠŸæç¤º
        task.wait(0.5)
        if autoInteractEnabled then
            statusText.Text = "âœ… è‡ªåŠ¨äº’åŠ¨å·²å¯ç”¨\nå°†è‡ªåŠ¨ä¸é™„è¿‘ç‰©ä½“äº’åŠ¨"
            statusText.TextColor3 = Color3.fromRGB(100, 255, 100)
            
            game:GetService("StarterGui"):SetCore("SendNotification", {
                Title = "è‡ªåŠ¨äº’åŠ¨",
                Text = "å·²å¯ç”¨ï¼é™„è¿‘ç‰©ä½“å°†è‡ªåŠ¨äº’åŠ¨",
                Duration = 3,
                Icon = "rbxassetid://7734068321"
            })
        end
    end
end

autoInteractBtn.MouseButton1Click:Connect(toggleAutoInteract)

-- ===========================================
-- ç§’äº’åŠ¨åŠŸèƒ½
-- ===========================================
local instantInteractionEnabled = false

local function enableInstantInteraction()
    if instantInteractionEnabled then
        statusText.Text = "âš ï¸ ç§’äº’åŠ¨å·²å¯ç”¨"
        return
    end
    
    statusText.Text = "ğŸ”„ æ­£åœ¨å¯ç”¨ç§’äº’åŠ¨..."
    statusText.TextColor3 = Color3.fromRGB(100, 200, 255)
    
    spawn(function()
        local success, err = pcall(function()
            -- è¶…è½»é‡ç§’äº’åŠ¨è„šæœ¬ - ä¸€è¡Œä»£ç 
            getgenv().fireclickdetector = function(clickDetector, ...)
                if clickDetector and clickDetector:IsA("ClickDetector") then
                    (getrenv().fireclickdetector or fireclickdetector)(clickDetector, ...)
                end
            end
            
            -- ç§»é™¤æ‰€æœ‰äº’åŠ¨å»¶è¿Ÿ
            for _, v in pairs(game:GetDescendants()) do
                if v:IsA("ProximityPrompt") then
                    v.HoldDuration = 0
                end
            end
            
            -- ç‚¹å‡»å³å®Œæˆ
            local mouse = game:GetService("Players").LocalPlayer:GetMouse()
            mouse.Button1Down:Connect(function()
                local target = mouse.Target
                if target then
                    local clicker = target:FindFirstChildOfClass("ClickDetector")
                    if clicker then
                        fireclickdetector(clicker)
                    end
                    
                    local prompt = target:FindFirstChildOfClass("ProximityPrompt")
                    if prompt then
                        pcall(function()
                            prompt.HoldDuration = 0
                            prompt:InputHoldBegin()
                            prompt:InputHoldEnd()
                        end)
                    end
                end
            end)
            
            instantInteractionEnabled = true
            
            statusText.Text = "âœ… ç§’äº’åŠ¨å·²å¯ç”¨ï¼\nç‚¹å‡»ä»»ä½•ç‰©ä½“ç«‹å³äº’åŠ¨"
            statusText.TextColor3 = Color3.fromRGB(100, 255, 100)
            
            game:GetService("StarterGui"):SetCore("SendNotification", {
                Title = "ç§’äº’åŠ¨",
                Text = "å·²å¯ç”¨ï¼ç‚¹å‡»å³å®Œæˆ",
                Duration = 3,
                Icon = "rbxassetid://7734068321"
            })
        end)
        
        if not success then
            statusText.Text = "âŒ å¯ç”¨å¤±è´¥: " .. tostring(err)
            statusText.TextColor3 = Color3.fromRGB(255, 100, 100)
        end
        
        wait(3)
        if instantInteractionEnabled then
            statusText.Text = "âœ… ç§’äº’åŠ¨å·²å¯ç”¨ âœ“"
            statusText.TextColor3 = Color3.fromRGB(100, 255, 100)
        else
            statusText.Text = "ğŸŸ¢ ç³»ç»Ÿå°±ç»ª\né€‰æ‹©åŠŸèƒ½å¼€å§‹ä½¿ç”¨"
            statusText.TextColor3 = Color3.fromRGB(220, 220, 220)
        end
    end)
end

instantBtn.MouseButton1Click:Connect(enableInstantInteraction)

-- ===========================================
-- å…³é—­UIæŒ‰é’®åŠŸèƒ½
-- ===========================================
closeUIBtn.MouseButton1Click:Connect(function()
    -- å…ˆåœæ­¢è‡ªåŠ¨äº’åŠ¨
    if autoInteractEnabled then
        toggleAutoInteract()
        wait(0.2)
    end
    
    statusText.Text = "ğŸ”„ æ­£åœ¨å…³é—­..."
    statusText.TextColor3 = Color3.fromRGB(255, 200, 100)
    
    wait(0.5)
    
    -- å®Œå…¨é”€æ¯UI
    ui:Destroy()
    
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "æç¤º",
        Text = "å·²å…³é—­",
        Duration = 2
    })
end)

-- ===========================================
-- é”®ç›˜å¿«æ·é”®
-- ===========================================
UserInputService.InputBegan:Connect(function(input, processed)
    if processed then return end
    
    if input.KeyCode == Enum.KeyCode.F1 then
        cleanBtn:MouseButton1Click()
    elseif input.KeyCode == Enum.KeyCode.F2 then
        if not instantInteractionEnabled then
            enableInstantInteraction()
        end
    elseif input.KeyCode == Enum.KeyCode.F3 then
        toggleAutoInteract()
    elseif input.KeyCode == Enum.KeyCode.F4 then
        if panel.Visible then
            panel.Visible = false
            floatButton.Visible = true
        else
            panel.Visible = true
            floatButton.Visible = false
        end
    end
end)

-- åˆå§‹æç¤º
print("ğŸ® PLAYBREAKå·¥å…·ç®± v2.0 å·²åŠ è½½")
print("ğŸ“‹ å¿«æ·é”®:")
print("  F1 - å¼€å§‹æ‰§è¡Œï¼ˆæ¸…ç†è„šæœ¬ï¼‰")
print("  F2 - å¯ç”¨ç§’äº’åŠ¨")
print("  F3 - åˆ‡æ¢è‡ªåŠ¨äº’åŠ¨")
print("  F4 - æ˜¾ç¤º/éšè—UI")