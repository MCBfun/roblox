-- killaura
local SoundService = game:GetService("SoundService")

-- åˆ›å»ºéŸ³é¢‘å®ä¾‹
local sound = Instance.new("Sound")
sound.SoundId = "rbxassetid://7390036132"  -- æ›¿æ¢ä¸ºä½ çš„éŸ³é¢‘ID
sound.Parent = SoundService

-- æ’­æ”¾éŸ³é¢‘
sound:Play()
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local isRunning = true
-- å¼ºåˆ¶ç­‰å¾…æ¸¸æˆæ ¸å¿ƒæœåŠ¡åŠ è½½
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local Workspace = game:GetService("Workspace")
local TweenService = game:GetService("TweenService")
local SoundService = game:GetService("SoundService")

-- å…³é”®ï¼šå¼ºåˆ¶ç­‰å¾…ç©å®¶å’ŒPlayerGuiåŠ è½½å®Œæˆï¼Œè¶…æ—¶10ç§’
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui", 10)
if not playerGui then
    warn("[ERROR] PlayerGuiåŠ è½½è¶…æ—¶")
    return
end

-- å…³é”®ï¼šç­‰å¾…è§’è‰²åŠ è½½å®Œæˆï¼Œç¡®ä¿æ ¹éƒ¨ä»¶å­˜åœ¨
local character = player.Character or player.CharacterAdded:Wait()
local rootPart = character:FindFirstChild("HumanoidRootPart", 10) or character:FindFirstChild("Torso", 10)
if not rootPart then
    warn("[ERROR] è§’è‰²æ ¹éƒ¨ä»¶åŠ è½½å¤±è´¥")
    return
end

local isRunning = true
local camera = Workspace.CurrentCamera
local comboNotifyFlag = false

-- ========== å¼¹çª—æç¤ºå‡½æ•° ==========
local function createNotification(text, color)
    local existingNotify = playerGui:FindFirstChild("KillauraNotify")
    if existingNotify then existingNotify:Destroy() end
    local notifyGui = Instance.new("ScreenGui")
    notifyGui.Name = "KillauraNotify"
    notifyGui.IgnoreGuiInset = true
    notifyGui.Parent = playerGui
    -- å¼ºåˆ¶ç½®é¡¶ï¼Œç¡®ä¿æ˜¾ç¤º
    notifyGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

    local notifyFrame = Instance.new("Frame")
    notifyFrame.Size = UDim2.new(0,220,0,60)
    notifyFrame.Position = UDim2.new(1,-230,1,-90)
    notifyFrame.BackgroundColor3 = Color3.fromRGB(25,25,30)
    notifyFrame.BackgroundTransparency = 0.1
    notifyFrame.Parent = notifyGui
    notifyFrame.ZIndex = 100
    Instance.new("UICorner", notifyFrame).CornerRadius = UDim.new(0,8)
    Instance.new("UIStroke", notifyFrame).Color = color or Color3.fromRGB(60,60,70)

    local notifyLabel = Instance.new("TextLabel")
    notifyLabel.Size = UDim2.new(1,-10,1,-10)
    notifyLabel.Position = UDim2.new(0,5,0,5)
    notifyLabel.BackgroundTransparency = 1
    notifyLabel.Text = text
    notifyLabel.TextColor3 = Color3.fromRGB(240,240,240)
    notifyLabel.TextSize = 14
    notifyLabel.TextWrapped = true
    notifyLabel.Font = Enum.Font.SourceSansSemibold
    notifyLabel.Parent = notifyFrame
    notifyLabel.ZIndex = 101

    TweenService:Create(notifyFrame, TweenInfo.new(0.1), {
        BackgroundTransparency = 0.1,
        Position = UDim2.new(1,-230,1,-90)
    }):Play()

    task.delay(3, function()
        TweenService:Create(notifyFrame, TweenInfo.new(0.3), {
            BackgroundTransparency = 1,
            Position = UDim2.new(1,-200,1,-90)
        }):Play()
        task.wait(0.3)
        notifyGui:Destroy()
    end)
end

-- ========== å¼ºåˆ¶åˆ›å»ºUIï¼Œç¡®ä¿æ¸²æŸ“ ==========
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "MonsterKillauraGUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui
-- å¼ºåˆ¶ç½®é¡¶UIï¼Œé˜²æ­¢è¢«å…¶ä»–ç•Œé¢é®æŒ¡
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- ä¸»é¢æ¿
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 120, 0, 215)
mainFrame.Position = UDim2.new(0.02, 0, 0.3, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
mainFrame.BackgroundTransparency = 0.1
mainFrame.BorderSizePixel = 1
mainFrame.BorderColor3 = Color3.fromRGB(60, 60, 70)
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.ClipsDescendants = true
mainFrame.Parent = screenGui
mainFrame.ZIndex = 10
Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 6)

-- æ ‡é¢˜æ 
local titleBar = Instance.new("Frame")
titleBar.Name = "TitleBar"
titleBar.Size = UDim2.new(1, 0, 0, 25)
titleBar.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
titleBar.BorderSizePixel = 0
titleBar.Parent = mainFrame
titleBar.ZIndex = 11
Instance.new("UICorner", titleBar).CornerRadius = UDim.new(0, 6)

-- é¸­å­logo ã€æ ¸å¿ƒä¿®æ”¹ï¼šè°ƒæ•´ZIndexä¸º3ï¼Œä½äºæŒ‰é’®å±‚çº§ã€‘
local titleImage = Instance.new("ImageLabel")
titleImage.Name = "TitleDuckImage"
titleImage.Size = UDim2.new(0, 20, 0, 20)
titleImage.Position = UDim2.new(0, 5, 0, 2)
titleImage.BackgroundTransparency = 1
titleImage.Image = "rbxassetid://98446998103932"
titleImage.ScaleType = Enum.ScaleType.Fit
titleImage.Parent = titleBar
titleImage.ZIndex = 3 -- åŸ12 â†’ æ”¹ä¸º3ï¼Œä½äºæŒ‰é’®çš„12

-- æ ‡é¢˜æ–‡å­—
local titleText = Instance.new("TextLabel")
titleText.Text = " Monster"
titleText.Size = UDim2.new(1, -30, 1, 0)
titleText.Position = UDim2.new(0, 25, 0, 0)
titleText.BackgroundTransparency = 1
titleText.TextColor3 = Color3.fromRGB(220, 220, 220)
titleText.TextXAlignment = Enum.TextXAlignment.Left
titleText.Font = Enum.Font.SourceSansSemibold
titleText.TextSize = 14
titleText.Parent = titleBar
titleText.ZIndex = 12

-- æ§åˆ¶æŒ‰é’®å®¹å™¨
local controlButtons = Instance.new("Frame")
controlButtons.Size = UDim2.new(0, 75, 1, 0)
controlButtons.Position = UDim2.new(1, -75, 0, 0)
controlButtons.BackgroundTransparency = 1
controlButtons.Parent = titleBar
controlButtons.ZIndex = 11

-- æ§åˆ¶æŒ‰é’®åˆ›å»ºå‡½æ•°
local function createCtrlBtn(parent, pos, text, color)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0,25,0,25)
    btn.Position = pos
    btn.Text = text
    btn.BackgroundColor3 = color
    btn.TextColor3 = Color3.fromRGB(220,220,220)
    btn.Font = Enum.Font.SourceSansBold
    btn.TextSize = 14
    btn.AutoButtonColor = false
    btn.Parent = parent
    btn.ZIndex = 12
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0,4)
    local origColor = btn.BackgroundColor3
    btn.MouseEnter:Connect(function() btn.BackgroundColor3 = Color3.fromRGB(math.clamp(origColor.R*255+15,0,255), math.clamp(origColor.G*255+15,0,255), math.clamp(origColor.B*255+15,0,255))/255 end)
    btn.MouseLeave:Connect(function() btn.BackgroundColor3 = origColor end)
    return btn
end

local zoomBtn = createCtrlBtn(controlButtons, UDim2.new(0,0,0,0), "âºï¸", Color3.fromRGB(40,40,45))
local minimizeBtn = createCtrlBtn(controlButtons, UDim2.new(0,25,0,0), "_", Color3.fromRGB(40,40,45))
local closeBtn = createCtrlBtn(controlButtons, UDim2.new(0,50,0,0), "Ã—", Color3.fromRGB(45,35,35))

-- åŠŸèƒ½æŒ‰é’®åˆ›å»ºå‡½æ•°
local function createFuncBtn(parent, pos, text)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1,-10,0,40)
    btn.Position = pos
    btn.Text = text
    btn.BackgroundColor3 = Color3.fromRGB(35,35,40)
    btn.TextColor3 = Color3.fromRGB(220,220,220)
    btn.Font = Enum.Font.SourceSansSemibold
    btn.TextSize = 14
    btn.AutoButtonColor = false
    btn.Parent = parent
    btn.ZIndex = 12
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0,5)
    local origColor = btn.BackgroundColor3
    btn.MouseEnter:Connect(function() btn.BackgroundColor3 = Color3.fromRGB(50,50,55) end)
    btn.MouseLeave:Connect(function() btn.BackgroundColor3 = origColor end)
    return btn
end

local comboButton = createFuncBtn(mainFrame, UDim2.new(0,5,0,30), "æ€æˆ®å…‰ç¯ [å…³]")
local cycleTeleportButton = createFuncBtn(mainFrame, UDim2.new(0,5,0,75), "è½®æµä¼ é€")
local autoPipeButton = createFuncBtn(mainFrame, UDim2.new(0,5,0,120), "è‡´å‘½ç®¡é“")

-- ç¼©å°çŠ¶æ€æç¤ºæ ‡ç­¾
local statusLabel = Instance.new("TextLabel")
statusLabel.Size = UDim2.new(1,-10,1,-10)
statusLabel.Position = UDim2.new(0,5,0,5)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = "Monster\nç‚¹å‡»å±•å¼€"
statusLabel.TextColor3 = Color3.fromRGB(180,180,180)
statusLabel.TextSize = 12
statusLabel.TextWrapped = true
statusLabel.Visible = false
statusLabel.Parent = mainFrame
statusLabel.ZIndex = 12

-- ========== çŠ¶æ€å˜é‡ ==========
local isComboActive = false
local isMinimized = false
local isZoomed = false
local originalSize = mainFrame.Size
local minimizedSize = UDim2.new(0,80,0,40)
local zoomedSize = UDim2.new(0,140,0,225)
local maxDistance = 200
local teleportHeight = 3 -- ä¿®å¤ï¼šæŠ¬é«˜ä¼ é€é«˜åº¦ï¼Œé¿å…å¡å…¥åœ°é¢
local lastAttackTime = 0
local attackRate = 10 -- ä¿®å¤ï¼šæé«˜æ”»å‡»é¢‘ç‡ï¼ˆæ¯ç§’10æ¬¡ï¼‰
local cycleTeleportIndex = 1
local targetHumanoid = nil -- æ–°å¢ï¼šå­˜å‚¨ç›®æ ‡Humanoidï¼Œç”¨äºæ”»å‡»åˆ¤å®š

-- ========== æœç´¢æ‰€æœ‰å¯äº’åŠ¨ç‰©ä½“å‡½æ•° ==========
local function findAllInteractables()
    local interactableObjects = {}
    print("ğŸ” å¼€å§‹æœç´¢å¯äº’åŠ¨ç‰©ä½“...")
    
    local allObjects = Workspace:GetDescendants()
    
    for _, obj in ipairs(allObjects) do
        -- åªæœç´¢çœŸæ­£çš„äº’åŠ¨ç‰©ä½“
        if obj:IsA("ClickDetector") then
            local part = obj.Parent
            if part and part:IsA("BasePart") then
                table.insert(interactableObjects, {
                    position = part.Position,
                    type = "ClickDetector",
                    object = obj
                })
            end
        end
        
        if obj:IsA("ProximityPrompt") then
            local part = obj.Parent
            if part and part:IsA("BasePart") then
                table.insert(interactableObjects, {
                    position = part.Position,
                    type = "ProximityPrompt",
                    object = obj
                })
            end
        end
    end
    
    -- å»é‡
    local uniqueObjects = {}
    local seen = {}
    for _, obj in ipairs(interactableObjects) do
        local key = string.format("%.1f,%.1f,%.1f", obj.position.X, obj.position.Y, obj.position.Z)
        if not seen[key] then
            seen[key] = true
            table.insert(uniqueObjects, obj)
        end
    end
    
    print("âœ… æ‰¾åˆ°", #uniqueObjects, "ä¸ªå¯äº’åŠ¨ç‰©ä½“")
    return uniqueObjects
end

-- ========== æ ¸å¿ƒï¼šè‡´å‘½ç®¡é“ - éå†æ‰€æœ‰å¯äº’åŠ¨ç‰©ä½“ ==========
local function performAutoPipeTeleport()
    -- å®æ—¶åˆ·æ–°æ ¹éƒ¨ä»¶ï¼Œé˜²æ­¢è§’è‰²é‡ç½®å¤±æ•ˆ
    rootPart = character:FindFirstChild("HumanoidRootPart") or character:FindFirstChild("Torso")
    if not rootPart then
        createNotification("æ ¹éƒ¨ä»¶ä¸¢å¤±", Color3.fromRGB(200,50,50))
        return
    end

    -- ç‚¹å‡»åç«‹å³æ›´æ–°çŠ¶æ€
    autoPipeButton.Text = "ä¼ é€ä¸­..."
    createNotification("å¼€å§‹éå†å¯äº’åŠ¨ç‰©ä½“", Color3.fromRGB(50,200,50))
    local originalCFrame = rootPart.CFrame

    -- æœç´¢æ‰€æœ‰å¯äº’åŠ¨ç‰©ä½“
    local allInteractables = findAllInteractables()
    
    if #allInteractables == 0 then
        createNotification("æœªæ‰¾åˆ°å¯äº’åŠ¨ç‰©ä½“", Color3.fromRGB(200,50,50))
        autoPipeButton.Text = "è‡´å‘½ç®¡é“"
        return
    end
    
    createNotification(string.format("æ‰¾åˆ° %d ä¸ªå¯äº’åŠ¨ç‰©ä½“", #allInteractables), Color3.fromRGB(50,200,50))

    -- éå†æ‰€æœ‰å¯äº’åŠ¨ç‰©ä½“ï¼Œæ¯ä¸ªé—´éš”0.05ç§’
    task.spawn(function()
        for i, interactable in ipairs(allInteractables) do
            -- ä¼ é€
            rootPart.CFrame = CFrame.new(interactable.position)
            autoPipeButton.Text = string.format("è¿›åº¦: %d/%d", i, #allInteractables)
            
            -- å°è¯•äº’åŠ¨
            if interactable.type == "ClickDetector" then
                pcall(function()
                    fireclickdetector(interactable.object)
                end)
            elseif interactable.type == "ProximityPrompt" then
                pcall(function()
                    fireproximityprompt(interactable.object)
                end)
            end
            
            -- ç­‰å¾…0.05ç§’
            task.wait(0.05)
        end
        
        -- å®Œæˆåå›åˆ°åŸä½ç½®
        rootPart.CFrame = originalCFrame
        autoPipeButton.Text = "è‡´å‘½ç®¡é“"
        createNotification("è‡´å‘½ç®¡é“ä¼ é€å®Œæˆ", Color3.fromRGB(50,200,50))
        if isMinimized then statusLabel.Text = "âœ… ç®¡é“ä¼ é€å®Œæˆ" end
    end)
end

-- ========== ä¿®å¤ï¼šæ€æˆ®å…‰ç¯æ ¸å¿ƒå‡½æ•°ï¼ˆé‡å†™æ£€æµ‹+æ”»å‡»é€»è¾‘ï¼‰ ==========
local function getNearestPlayer()
    -- å®æ—¶åˆ·æ–°è§’è‰²å’Œæ ¹éƒ¨ä»¶
    character = player.Character or player.CharacterAdded:Wait()
    rootPart = character:FindFirstChild("HumanoidRootPart") or character:FindFirstChild("Torso")
    if not character or not rootPart then return nil end

    local nearestPlayer, nearestDist = nil, math.huge
    local humanoid = character:FindFirstChild("Humanoid")
    if not humanoid or humanoid.Health <= 0 then return nil end -- æ£€æµ‹è‡ªèº«å­˜æ´»

    for _, p in pairs(Players:GetPlayers()) do
        if p ~= player and p.Character and p.Character:FindFirstChild("Humanoid") then
            local targetHumanoid = p.Character:FindFirstChild("Humanoid")
            local targetRoot = p.Character:FindFirstChild("HumanoidRootPart")
            -- ä¿®å¤ï¼šç›®æ ‡å­˜æ´»åˆ¤å®šï¼ˆHealth>0è€Œé>5ï¼‰ï¼Œæ‰©å¤§æ£€æµ‹èŒƒå›´
            if targetRoot and targetHumanoid and targetHumanoid.Health > 0 then
                local dist = (rootPart.Position - targetRoot.Position).Magnitude
                if dist < maxDistance and dist < nearestDist then
                    nearestDist = dist
                    nearestPlayer = p
                    targetHumanoid = targetHumanoid -- ä¿å­˜ç›®æ ‡Humanoid
                end
            end
        end
    end
    return nearestPlayer, targetHumanoid
end

-- æ–°å¢ï¼šæ¨¡æ‹Ÿæ”»å‡»å‡½æ•°ï¼ˆå¤šç§æ”»å‡»æ–¹å¼å…¼å®¹ï¼‰
local function simulateAttack(target)
    if not target or not target.Character then return end
    
    local targetRoot = target.Character:FindFirstChild("HumanoidRootPart")
    if not targetRoot then return end

    -- æ–¹å¼1ï¼šæ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»ï¼ˆåŸé€»è¾‘ï¼‰
    pcall(function()
        VirtualInputManager:SendMouseButtonEvent(camera.ViewportSize.X/2, camera.ViewportSize.Y/2, 0, true, game, 0)
        task.wait(0.02)
        VirtualInputManager:SendMouseButtonEvent(camera.ViewportSize.X/2, camera.ViewportSize.Y/2, 0, false, game, 0)
    end)

    -- æ–¹å¼2ï¼šæ¨¡æ‹Ÿé”®ç›˜æ”»å‡»ï¼ˆå…¼å®¹FPSæ¸¸æˆï¼‰
    pcall(function()
        VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.F, false, game)
        task.wait(0.01)
        VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.F, false, game)
    end)

    -- æ–¹å¼3ï¼šå°„çº¿æ£€æµ‹+è¿œç¨‹äº‹ä»¶è§¦å‘ï¼ˆé€šç”¨æ”»å‡»é€»è¾‘ï¼‰
    pcall(function()
        local ray = Ray.new(camera.CFrame.Position, camera.CFrame.LookVector * 100)
        local hit, pos, normal, material, part = Workspace:FindPartOnRayWithIgnoreList(ray, {character})
        if hit and hit:IsDescendantOf(target.Character) then
            -- å°è¯•è§¦å‘å¸¸è§æ”»å‡»è¿œç¨‹äº‹ä»¶
            local remoteEvents = Workspace:GetDescendants()
            for _, remote in ipairs(remoteEvents) do
                if remote:IsA("RemoteEvent") and (remote.Name:find("Attack") or remote.Name:find("Hit") or remote.Name:find("Damage")) then
                    remote:FireServer(target, pos)
                    break
                end
            end
        end
    end)
end

local function performKillaura()
    if not isComboActive then
        comboNotifyFlag = false
        comboButton.Text = "æ€æˆ®å…‰ç¯ [å…³]"
        return
    end

    -- è·å–æœ€è¿‘ç©å®¶å’Œç›®æ ‡Humanoid
    local nearestPlayer, targetHumo = getNearestPlayer()
    if not nearestPlayer then
        comboNotifyFlag = false
        comboButton.Text = "æ€æˆ®å…‰ç¯ [å¼€]"
        if isMinimized then statusLabel.Text = " Monster\næœªé”å®šç›®æ ‡" end
        return
    end

    -- å®æ—¶åˆ·æ–°è§’è‰²å’Œæ ¹éƒ¨ä»¶
    character = player.Character or player.CharacterAdded:Wait()
    rootPart = character:FindFirstChild("HumanoidRootPart") or character:FindFirstChild("Torso")
    local targetRoot = nearestPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not rootPart or not targetRoot then return end

    -- ä¿®å¤ï¼šä¼ é€ä½ç½®ï¼ˆå‘ååç§»3å•ä½ï¼Œé¿å…å¡æ¨¡å‹ï¼‰
    local teleportPos = targetRoot.Position + (targetRoot.CFrame.LookVector * -3) + Vector3.new(0, teleportHeight, 0)
    rootPart.CFrame = CFrame.new(teleportPos)
    
    -- ä¿®å¤ï¼šç›¸æœºæœå‘ï¼ˆç„å‡†ç›®æ ‡å¤´éƒ¨ï¼‰
    local targetHead = nearestPlayer.Character:FindFirstChild("Head") or targetRoot
    camera.CFrame = CFrame.lookAt(camera.CFrame.Position, targetHead.Position)

    -- ä¿®å¤ï¼šæ”»å‡»é¢‘ç‡åˆ¤å®šï¼ˆæŒ‰attackRateæ­£ç¡®è®¡ç®—ï¼‰
    local currentTime = tick()
    if currentTime - lastAttackTime >= 1/attackRate then
        -- æ‰§è¡Œæ”»å‡»
        simulateAttack(nearestPlayer)
        lastAttackTime = currentTime
        
        -- æç¤ºæ›´æ–°
        if not comboNotifyFlag then
            createNotification("å·²é”å®š: "..nearestPlayer.Name, Color3.fromRGB(50,200,50))
            comboNotifyFlag = true
            if isMinimized then statusLabel.Text = " é”å®š: "..string.sub(nearestPlayer.Name,1,6) end
        end
    end
    comboButton.Text = "é”å®š: "..string.sub(nearestPlayer.Name,1,6)
end

-- ========== è½®æµä¼ é€å‡½æ•° ==========
local function performCycleTeleport()
    character = player.Character or player.CharacterAdded:Wait()
    rootPart = character:FindFirstChild("HumanoidRootPart") or character:FindFirstChild("Torso")
    if not character or not rootPart then return end

    local validPlayers = {}
    for _, p in pairs(Players:GetPlayers()) do
        if p ~= player and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
            table.insert(validPlayers, p)
        end
    end
    if #validPlayers == 0 then
        createNotification("æ— æœ‰æ•ˆç©å®¶", Color3.fromRGB(200,50,50))
        return
    end
    cycleTeleportIndex = cycleTeleportIndex % #validPlayers + 1
    local target = validPlayers[cycleTeleportIndex]
    local targetRoot = target.Character:FindFirstChild("HumanoidRootPart")
    -- ä¿®å¤ï¼šä¼ é€ä½ç½®ï¼ˆå‘ååç§»ï¼Œé¿å…å¡æ¨¡å‹ï¼‰
    local teleportPos = targetRoot.Position + (targetRoot.CFrame.LookVector * -2) + Vector3.new(0, teleportHeight, 0)
    rootPart.CFrame = CFrame.new(teleportPos)
    createNotification("ä¼ é€åˆ°: "..target.Name, Color3.fromRGB(50,200,50))
    if isMinimized then statusLabel.Text = "â¡ ä¼ é€åˆ°: "..string.sub(target.Name,1,6) end
end

-- ========== UIäº¤äº’é€»è¾‘ ==========
zoomBtn.MouseButton1Click:Connect(function()
    isZoomed = not isZoomed
    local targetSize = isZoomed and zoomedSize or originalSize
    TweenService:Create(mainFrame, TweenInfo.new(0.3), {Size = targetSize}):Play()
    zoomBtn.Text = isZoomed and "âº" or "âºï¸"
end)

minimizeBtn.MouseButton1Click:Connect(function()
    isMinimized = not isMinimized
    if isMinimized then
        TweenService:Create(mainFrame, TweenInfo.new(0.3), {Size = minimizedSize}):Play()
        comboButton.Visible = false
        cycleTeleportButton.Visible = false
        autoPipeButton.Visible = false
        statusLabel.Visible = true
        minimizeBtn.Text = "+"
        titleText.Visible = false
        titleImage.Size = UDim2.new(0, 20, 0, 20)
        titleImage.Position = UDim2.new(0.5, -10, 0, 2)
        if isComboActive then
            statusLabel.Text = " æ€æˆ®å…‰ç¯å¼€å¯"
        else
            statusLabel.Text = " Monster\nç‚¹å‡»å±•å¼€"
        end
    else
        comboButton.Visible = true
        cycleTeleportButton.Visible = true
        autoPipeButton.Visible = true
        statusLabel.Visible = false
        minimizeBtn.Text = "_"
        titleText.Visible = true
        titleImage.Size = UDim2.new(0, 20, 0, 20)
        titleImage.Position = UDim2.new(0, 5, 0, 2)
        local targetSize = isZoomed and zoomedSize or originalSize
        TweenService:Create(mainFrame, TweenInfo.new(0.3), {Size = targetSize}):Play()
    end
end)

closeBtn.MouseButton1Click:Connect(function()
    TweenService:Create(mainFrame, TweenInfo.new(0.3), {
        BackgroundTransparency = 0.8,
        Position = mainFrame.Position + UDim2.new(0,0,0,-20)
    }):Play()
    task.wait(0.3)
    screenGui:Destroy()
    isRunning = false
    createNotification("Killauraé¢æ¿å·²å…³é—­", Color3.fromRGB(200,50,50))
end)

comboButton.MouseButton1Click:Connect(function()
    isComboActive = not isComboActive
    comboButton.Text = isComboActive and "æ€æˆ®å…‰ç¯ [å¼€]" or "æ€æˆ®å…‰ç¯ [å…³]"
    mainFrame.Draggable = not isComboActive
    createNotification(isComboActive and "æ€æˆ®å…‰ç¯å·²å¼€å¯(UIå›ºå®š)" or "æ€æˆ®å…‰ç¯å·²å…³é—­(UIå¯æ‹–åŠ¨)", isComboActive and Color3.fromRGB(50,200,50) or Color3.fromRGB(200,50,50))
    if isMinimized then statusLabel.Text = isComboActive and " æ€æˆ®å…‰ç¯å¼€å¯" or " Monster\nç‚¹å‡»å±•å¼€" end
end)

-- ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œ0å»¶è¿Ÿè§¦å‘
cycleTeleportButton.MouseButton1Click:Connect(performCycleTeleport)
autoPipeButton.MouseButton1Click:Connect(performAutoPipeTeleport)

-- å¿«æ·é”®
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if not gameProcessed and input.KeyCode == Enum.KeyCode.RightControl then
        isComboActive = not isComboActive
        comboButton.Text = isComboActive and "æ€æˆ®å…‰ç¯ [å¼€]" or "æ€æˆ®å…‰ç¯ [å…³]"
        mainFrame.Draggable = not isComboActive
        createNotification(isComboActive and "æ€æˆ®å…‰ç¯å·²å¼€å¯(UIå›ºå®š)" or "æ€æˆ®å…‰ç¯å·²å…³é—­(UIå¯æ‹–åŠ¨)", isComboActive and Color3.fromRGB(50,200,50) or Color3.fromRGB(200,50,50))
        if isMinimized then statusLabel.Text = isComboActive and " æ€æˆ®å…‰ç¯å¼€å¯" or " Monster\nç‚¹å‡»å±•å¼€" end
    end
end)

-- ä¿®å¤ï¼šä¸»å¾ªç¯ï¼ˆæ”¹ç”¨RenderSteppedï¼Œæ”»å‡»æ›´åŠæ—¶ï¼‰
RunService.RenderStepped:Connect(function()
    if isRunning then performKillaura() end
end)

-- å¼ºåˆ¶è§¦å‘UIæ˜¾ç¤ºåŠ¨ç”»
mainFrame.BackgroundTransparency = 1
mainFrame.Position = UDim2.new(0.02,0,0.3,-30)
TweenService:Create(mainFrame, TweenInfo.new(0.2), {
    BackgroundTransparency = 0.1,
    Position = UDim2.new(0.02,0,0.3,0)
}):Play()
createNotification(" Monster Killauraé¢æ¿å·²åŠ è½½", Color3.fromRGB(50,200,50))

-- éŸ³é¢‘åˆå§‹åŒ–ï¼ˆæœ€ååŠ è½½ï¼Œé¿å…é˜»å¡UIï¼‰
local sound2 = Instance.new("Sound")
sound2.SoundId = "rbxassetid://98446998103932"
sound2.Parent = SoundService
sound2:Play()