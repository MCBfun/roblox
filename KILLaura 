-- æç®€è‡ªç„+ä¼ é€+æ”»å‡»è„šæœ¬ - å®Œæ•´ç‰ˆï¼ˆå››åˆä¸€åŠŸèƒ½ï¼‰
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local Workspace = game:GetService("Workspace")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local isRunning = true
local camera = Workspace.CurrentCamera

-- åˆ›å»ºæœ€å°åŒ–UI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "SimpleAimbotGUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 120, 0, 210)  -- å¢åŠ é«˜åº¦ä»¥å®¹çº³å››ä¸ªæŒ‰é’®
mainFrame.Position = UDim2.new(0.02, 0, 0.3, 0)  -- æ”¹ä¸ºå›ºå®šä½ç½®ï¼Œè€Œä¸æ˜¯ä½¿ç”¨AnchorPoint
mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 55)
mainFrame.BackgroundTransparency = 0.2
mainFrame.BorderSizePixel = 1
mainFrame.BorderColor3 = Color3.fromRGB(80, 80, 100)
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.ClipsDescendants = true
mainFrame.Parent = screenGui

-- åœ†è§’æ•ˆæœ
local uiCorner = Instance.new("UICorner")
uiCorner.CornerRadius = UDim.new(0, 6)
uiCorner.Parent = mainFrame

-- æ ‡é¢˜æ 
local titleBar = Instance.new("Frame")
titleBar.Name = "TitleBar"
titleBar.Size = UDim2.new(1, 0, 0, 25)
titleBar.BackgroundColor3 = Color3.fromRGB(30, 30, 45)
titleBar.BorderSizePixel = 0
titleBar.Parent = mainFrame

-- æ ‡é¢˜æ åœ†è§’
local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 6)
titleCorner.Parent = titleBar

local title = Instance.new("TextLabel")
title.Text = "Monster"
title.Size = UDim2.new(1, -80, 1, 0)
title.Position = UDim2.new(0, 5, 0, 0)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextXAlignment = Enum.TextXAlignment.Left
title.Font = Enum.Font.SourceSansSemibold
title.TextSize = 14
title.Parent = titleBar

-- æ§åˆ¶æŒ‰é’®å®¹å™¨ï¼ˆç°åœ¨æœ‰3ä¸ªæŒ‰é’®ï¼‰
local controlButtons = Instance.new("Frame")
controlButtons.Name = "ControlButtons"
controlButtons.Size = UDim2.new(0, 75, 1, 0)
controlButtons.Position = UDim2.new(1, -75, 0, 0)
controlButtons.BackgroundTransparency = 1
controlButtons.Parent = titleBar

-- ç¼©æ”¾æŒ‰é’®ï¼ˆæ–°å¢ï¼‰
local zoomBtn = Instance.new("TextButton")
zoomBtn.Name = "ZoomButton"
zoomBtn.Size = UDim2.new(0, 25, 0, 25)
zoomBtn.Position = UDim2.new(0, 0, 0, 0)
zoomBtn.Text = "âºï¸"
zoomBtn.BackgroundColor3 = Color3.fromRGB(60, 100, 180)
zoomBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
zoomBtn.Font = Enum.Font.SourceSansBold
zoomBtn.TextSize = 14
zoomBtn.AutoButtonColor = false
zoomBtn.Parent = controlButtons

-- ç¼©å°æŒ‰é’®
local minimizeBtn = Instance.new("TextButton")
minimizeBtn.Name = "MinimizeButton"
minimizeBtn.Size = UDim2.new(0, 25, 0, 25)
minimizeBtn.Position = UDim2.new(0, 25, 0, 0)
minimizeBtn.Text = "_"
minimizeBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 80)
minimizeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
minimizeBtn.Font = Enum.Font.SourceSansBold
minimizeBtn.TextSize = 16
minimizeBtn.AutoButtonColor = false
minimizeBtn.Parent = controlButtons

-- å…³é—­æŒ‰é’®
local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0, 25, 0, 25)
closeBtn.Position = UDim2.new(0, 50, 0, 0)
closeBtn.Text = "Ã—"
closeBtn.BackgroundColor3 = Color3.fromRGB(180, 60, 60)
closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
closeBtn.Font = Enum.Font.SourceSansBold
closeBtn.TextSize = 16
closeBtn.AutoButtonColor = false
closeBtn.Parent = controlButtons

-- ä¸‰ä¸ªåˆä¸€æŒ‰é’®
local comboButton = Instance.new("TextButton")
comboButton.Name = "ComboButton"
comboButton.Size = UDim2.new(1, -10, 0, 40)
comboButton.Position = UDim2.new(0, 5, 0, 30)
comboButton.Text = "killaura"
comboButton.BackgroundColor3 = Color3.fromRGB(180, 60, 60)
comboButton.TextColor3 = Color3.fromRGB(255, 255, 255)
comboButton.Font = Enum.Font.SourceSansSemibold
comboButton.TextSize = 14
comboButton.TextWrapped = true
comboButton.AutoButtonColor = false
comboButton.Parent = mainFrame

-- æ·»åŠ åœ†è§’
local comboCorner = Instance.new("UICorner")
comboCorner.CornerRadius = UDim.new(0, 5)
comboCorner.Parent = comboButton

-- è½®æµä¼ é€æŒ‰é’®
local cycleTeleportButton = Instance.new("TextButton")
cycleTeleportButton.Name = "CycleTeleportButton"
cycleTeleportButton.Size = UDim2.new(1, -10, 0, 40)
cycleTeleportButton.Position = UDim2.new(0, 5, 0, 75)
cycleTeleportButton.Text = "è½®æµä¼ é€\nä¸‹ä¸€ä¸ªç©å®¶"
cycleTeleportButton.BackgroundColor3 = Color3.fromRGB(60, 100, 180)
cycleTeleportButton.TextColor3 = Color3.fromRGB(255, 255, 255)
cycleTeleportButton.Font = Enum.Font.SourceSansSemibold
cycleTeleportButton.TextSize = 14
cycleTeleportButton.TextWrapped = true
cycleTeleportButton.AutoButtonColor = false
cycleTeleportButton.Parent = mainFrame

-- æ·»åŠ åœ†è§’
local teleportCorner = Instance.new("UICorner")
teleportCorner.CornerRadius = UDim.new(0, 5)
teleportCorner.Parent = cycleTeleportButton

-- å·¥å‚åœ°å›¾è‡ªåŠ¨ç®¡é“ä¼ é€åŠŸèƒ½
local factoryLocations = {
    {X = 314.57, Y = 10.58, Z = 350.95},
    {X = 387, Y = 7.48, Z = 331.22},
    {X = 335.74, Y = 18.14, Z = 206},
    {X = 184.17, Y = 18, Z = 244.44},
    {X = 405.2, Y = 33, Z = 374.88},
    {X = 358.95, Y = 18, Z = 436.84}
}

-- å·¥å‚ä¼ é€æŒ‰é’®
local factoryTeleportButton = Instance.new("TextButton")
factoryTeleportButton.Name = "FactoryTeleportButton"
factoryTeleportButton.Size = UDim2.new(1, -10, 0, 40)
factoryTeleportButton.Position = UDim2.new(0, 5, 0, 120)
factoryTeleportButton.Text = "å·¥å‚è‡ªåŠ¨ç®¡é“"
factoryTeleportButton.BackgroundColor3 = Color3.fromRGB(180, 100, 60)  -- æ©™è‰²
factoryTeleportButton.TextColor3 = Color3.fromRGB(255, 255, 255)
factoryTeleportButton.Font = Enum.Font.SourceSansSemibold
factoryTeleportButton.TextSize = 14
factoryTeleportButton.TextWrapped = true
factoryTeleportButton.AutoButtonColor = false
factoryTeleportButton.Parent = mainFrame

-- æ·»åŠ åœ†è§’
local factoryCorner = Instance.new("UICorner")
factoryCorner.CornerRadius = UDim.new(0, 5)
factoryCorner.Parent = factoryTeleportButton

-- å‰§é™¢åœ°å›¾ä¼ é€åŠŸèƒ½
local theaterLocations = {
    {X = -15.25, Y = 87.42, Z = -455.5},
    {X = 13.54, Y = 94.18, Z = -531.25},
    {X = -1.22, Y = 71, Z = -329.23},
    {X = 43.73, Y = 68.93, Z = -254.27},
    {X = -61.2, Y = 105.1, Z = -158.37},
    {X = 33.67, Y = 60.16, Z = -472}
}

-- å‰§é™¢ä¼ é€æŒ‰é’®
local theaterTeleportButton = Instance.new("TextButton")
theaterTeleportButton.Name = "TheaterTeleportButton"
theaterTeleportButton.Size = UDim2.new(1, -10, 0, 40)
theaterTeleportButton.Position = UDim2.new(0, 5, 0, 165)
theaterTeleportButton.Text = "å‰§é™¢è‡ªåŠ¨ç®¡é“"
theaterTeleportButton.BackgroundColor3 = Color3.fromRGB(100, 60, 180)  -- ç´«è‰²
theaterTeleportButton.TextColor3 = Color3.fromRGB(255, 255, 255)
theaterTeleportButton.Font = Enum.Font.SourceSansSemibold
theaterTeleportButton.TextSize = 14
theaterTeleportButton.TextWrapped = true
theaterTeleportButton.AutoButtonColor = false
theaterTeleportButton.Parent = mainFrame

-- æ·»åŠ åœ†è§’
local theaterCorner = Instance.new("UICorner")
theaterCorner.CornerRadius = UDim.new(0, 5)
theaterCorner.Parent = theaterTeleportButton

-- çŠ¶æ€æ˜¾ç¤ºï¼ˆç¼©å°åï¼‰
local statusLabel = Instance.new("TextLabel")
statusLabel.Name = "StatusLabel"
statusLabel.Size = UDim2.new(1, -10, 1, -10)
statusLabel.Position = UDim2.new(0, 5, 0, 5)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = "Monster\nç‚¹å‡»å±•å¼€"
statusLabel.TextColor3 = Color3.fromRGB(200, 200, 220)
statusLabel.TextSize = 12
statusLabel.TextWrapped = true
statusLabel.Visible = false
statusLabel.Parent = mainFrame

-- å˜é‡
local isComboActive = false  -- ä¸‰åˆä¸€çŠ¶æ€
local maxDistance = 200  -- å›ºå®šæœç´¢è·ç¦»
local teleportHeight = 0  -- å›ºå®šä¼ é€é«˜åº¦
local currentTarget = nil
local lastAttackTime = 0
local attackRate = 4  -- å›ºå®šæ”»å‡»é¢‘ç‡
local isMinimized = false
local isZoomed = false  -- æ–°å¢ï¼šç¼©æ”¾çŠ¶æ€
local originalSize = mainFrame.Size
local originalPosition = mainFrame.Position  -- ä¿å­˜åŸå§‹ä½ç½®
local minimizedSize = UDim2.new(0, 80, 0, 40)  -- æ›´å°çš„ç¼©å°æ¨¡å¼
local zoomedSize = UDim2.new(0, 140, 0, 230)  -- æ”¾å¤§åçš„å°ºå¯¸
local ignoreHealthThreshold = 5  -- å¿½ç•¥è¡€é‡ä½äºæ­¤å€¼çš„ç©å®¶

-- ä¼ é€ç›¸å…³å˜é‡
local cycleTeleportIndex = 1  -- å½“å‰ä¼ é€çš„ç©å®¶ç´¢å¼•
local factoryTeleportIndex = 1  -- å·¥å‚ä¼ é€ç´¢å¼•
local theaterTeleportIndex = 1  -- å‰§é™¢ä¼ é€ç´¢å¼•

-- æŒ‰é’®æ‚¬åœæ•ˆæœå‡½æ•°
local function setupButtonHover(button)
    local originalColor = button.BackgroundColor3

    button.MouseEnter:Connect(function()
        local tween = TweenService:Create(button, TweenInfo.new(0.2), {
            BackgroundColor3 = Color3.fromRGB(
                math.min(255, originalColor.R * 255 + 30),
                math.min(255, originalColor.G * 255 + 30),
                math.min(255, originalColor.B * 255 + 30)
            )
        })
        tween:Play()
    end)

    button.MouseLeave:Connect(function()
        local tween = TweenService:Create(button, TweenInfo.new(0.2), {
            BackgroundColor3 = originalColor
        })
        tween:Play()
    end)
end

-- åº”ç”¨æ‚¬åœæ•ˆæœ
setupButtonHover(comboButton)
setupButtonHover(cycleTeleportButton)
setupButtonHover(factoryTeleportButton)
setupButtonHover(theaterTeleportButton)
setupButtonHover(zoomBtn)
setupButtonHover(minimizeBtn)
setupButtonHover(closeBtn)

-- ç¼©æ”¾åŠŸèƒ½ï¼ˆä¿®å¤ç‰ˆï¼‰
zoomBtn.MouseButton1Click:Connect(function()
    isZoomed = not isZoomed

    if isZoomed then
        -- æ”¾å¤§ç•Œé¢ï¼Œä¿æŒå½“å‰ä½ç½®ä¸å˜
        local currentPos = mainFrame.Position
        local tween = TweenService:Create(mainFrame, TweenInfo.new(0.3), {
            Size = zoomedSize
        })
        tween:Play()

        zoomBtn.Text = "âºï¸"
        zoomBtn.BackgroundColor3 = Color3.fromRGB(80, 140, 220)

        -- æ”¾å¤§åæ›´æ–°æ–‡æœ¬å¤§å°
        if not isMinimized then
            comboButton.TextSize = 15
            cycleTeleportButton.TextSize = 15
            factoryTeleportButton.TextSize = 15
            theaterTeleportButton.TextSize = 15
            title.TextSize = 15
        end
    else
        -- ç¼©å°åˆ°åŸå§‹å¤§å°ï¼Œä¿æŒå½“å‰ä½ç½®ä¸å˜
        local currentPos = mainFrame.Position
        local tween = TweenService:Create(mainFrame, TweenInfo.new(0.3), {
            Size = originalSize
        })
        tween:Play()

        zoomBtn.Text = "â¬…ï¸"
        zoomBtn.BackgroundColor3 = Color3.fromRGB(60, 100, 180)

        -- æ¢å¤åŸå§‹æ–‡æœ¬å¤§å°
        if not isMinimized then
            comboButton.TextSize = 14
            cycleTeleportButton.TextSize = 14
            factoryTeleportButton.TextSize = 14
            theaterTeleportButton.TextSize = 14
            title.TextSize = 14
        end
    end
end)

-- ç¼©å°åŠŸèƒ½ï¼ˆä¿®å¤ç‰ˆï¼‰
minimizeBtn.MouseButton1Click:Connect(function()
    isMinimized = not isMinimized

    if isMinimized then
        -- ä¿å­˜å½“å‰ä½ç½®
        originalPosition = mainFrame.Position
        
        -- è®¡ç®—ç¼©å°åçš„ä½ç½®ï¼ˆä¿æŒå½“å‰ä½ç½®ï¼Œä½†è°ƒæ•´ä»¥é€‚åº”æ–°å¤§å°ï¼‰
        local currentPos = mainFrame.Position
        local minimizedPos = UDim2.new(
            currentPos.X.Scale,
            currentPos.X.Offset,
            currentPos.Y.Scale,
            currentPos.Y.Offset
        )
        
        -- ç¼©å°åŠ¨ç”»ï¼Œä¿æŒå½“å‰ä½ç½®
        local tween = TweenService:Create(mainFrame, TweenInfo.new(0.3), {
            Size = minimizedSize,
            Position = minimizedPos
        })
        tween:Play()

        tween.Completed:Wait()  -- ç­‰å¾…åŠ¨ç”»å®Œæˆ

        comboButton.Visible = false
        cycleTeleportButton.Visible = false
        factoryTeleportButton.Visible = false
        theaterTeleportButton.Visible = false
        statusLabel.Visible = true
        minimizeBtn.Text = "+"
        title.Text = "ğŸ¯"

        if isComboActive then
            statusLabel.Text = "killaura\nè¿è¡Œä¸­"
        else
            statusLabel.Text = "Monster\nå·²å…³é—­"
        end
    else
        -- æ¢å¤æ˜¾ç¤º
        comboButton.Visible = true
        cycleTeleportButton.Visible = true
        factoryTeleportButton.Visible = true
        theaterTeleportButton.Visible = true
        statusLabel.Visible = false
        minimizeBtn.Text = "_"
        title.Text = "Monster"

        -- æ¢å¤å¤§å°ï¼ˆæ ¹æ®å½“å‰ç¼©æ”¾çŠ¶æ€ï¼‰ï¼Œä¿æŒå½“å‰ä½ç½®ä¸å˜
        local currentPos = mainFrame.Position
        local targetSize = isZoomed and zoomedSize or originalSize
        
        local tween = TweenService:Create(mainFrame, TweenInfo.new(0.3), {
            Size = targetSize,
            Position = currentPos
        })
        tween:Play()
    end
end)

-- å…³é—­åŠŸèƒ½
closeBtn.MouseButton1Click:Connect(function()
    -- æ·¡å‡ºåŠ¨ç”»
    local tween = TweenService:Create(mainFrame, TweenInfo.new(0.3), {
        BackgroundTransparency = 0.8,
        Position = mainFrame.Position + UDim2.new(0, 0, 0, -20)
    })
    tween:Play()

    tween.Completed:Wait()  -- ç­‰å¾…åŠ¨ç”»å®Œæˆ
    screenGui:Destroy()
    isRunning = false
end)

-- ä¸‰åˆä¸€æŒ‰é’®åŠŸèƒ½
comboButton.MouseButton1Click:Connect(function()
    isComboActive = not isComboActive

    if isComboActive then
        comboButton.Text = "ğŸŸ¢ å¼€å¯\næ€æˆ®å…‰ç¯"
        comboButton.BackgroundColor3 = Color3.fromRGB(60, 180, 80)
        if isMinimized then
            statusLabel.Text = "killaura\nè¿è¡Œä¸­"
        end
    else
        comboButton.Text = "ğŸ”´ å…³é—­\næ€æˆ®å…‰ç¯"
        comboButton.BackgroundColor3 = Color3.fromRGB(180, 60, 60)
        currentTarget = nil
        if isMinimized then
            statusLabel.Text = "Monster\nå·²å…³é—­"
        end
    end
end)

-- è·å–ç©å®¶å½“å‰è¡€é‡
local function getPlayerHealth(targetCharacter)
    local humanoid = targetCharacter:FindFirstChild("Humanoid")
    if humanoid then
        return humanoid.Health
    end
    return 100  -- å¦‚æœæ‰¾ä¸åˆ°Humanoidï¼Œé»˜è®¤è¿”å›100
end

-- è·å–æ‰€æœ‰æœ‰æ•ˆç©å®¶åˆ—è¡¨ï¼ˆå¿½ç•¥è¡€é‡ä½äº5çš„ï¼‰
local function getValidPlayers()
    local validPlayers = {}

    for _, otherPlayer in ipairs(Players:GetPlayers()) do
        if otherPlayer ~= player and otherPlayer.Character then
            local otherRoot = otherPlayer.Character:FindFirstChild("HumanoidRootPart")
            if otherRoot then
                -- æ£€æŸ¥ç©å®¶è¡€é‡
                local health = getPlayerHealth(otherPlayer.Character)

                -- å¿½ç•¥è¡€é‡ä½äºé˜ˆå€¼çš„ç©å®¶
                if health >= ignoreHealthThreshold then
                    table.insert(validPlayers, {
                        Player = otherPlayer,
                        Character = otherPlayer.Character,
                        RootPart = otherRoot,
                        Health = health
                    })
                end
            end
        end
    end

    return validPlayers
end

-- è·å–æœ€è¿‘ç©å®¶ï¼ˆå¿½ç•¥è¡€é‡ä½äº5çš„ï¼‰
local function getNearestPlayer()
    local character = player.Character
    if not character then return nil end

    local rootPart = character:FindFirstChild("HumanoidRootPart")
    if not rootPart then return nil end

    local myPos = rootPart.Position
    local nearestPlayer = nil
    local nearestDistance = maxDistance

    local validPlayers = getValidPlayers()

    for _, targetInfo in ipairs(validPlayers) do
        local distance = (targetInfo.RootPart.Position - myPos).Magnitude
        if distance <= nearestDistance then
            nearestDistance = distance
            nearestPlayer = {
                Player = targetInfo.Player,
                Character = targetInfo.Character,
                Distance = distance,
                Position = targetInfo.RootPart.Position,
                Health = targetInfo.Health
            }
        end
    end

    return nearestPlayer
end

-- æ‰§è¡Œè½®æµä¼ é€
local function performCycleTeleport()
    local character = player.Character
    if not character then return end

    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
    if not humanoidRootPart then return end

    -- è·å–æœ‰æ•ˆç©å®¶åˆ—è¡¨
    local validPlayers = getValidPlayers()

    if #validPlayers == 0 then
        if isMinimized then
            statusLabel.Text = "æ— æœ‰æ•ˆç©å®¶"
        else
            cycleTeleportButton.Text = "æ— æœ‰æ•ˆç©å®¶"
            -- 3ç§’åæ¢å¤åŸæ–‡æœ¬
            task.wait(3)
            cycleTeleportButton.Text = "è½®æµä¼ é€\nä¸‹ä¸€ä¸ªç©å®¶"
        end
        return
    end

    -- ç¡®ä¿ç´¢å¼•åœ¨æœ‰æ•ˆèŒƒå›´å†…
    if cycleTeleportIndex > #validPlayers then
        cycleTeleportIndex = 1
    end

    local targetInfo = validPlayers[cycleTeleportIndex]

    if targetInfo and targetInfo.RootPart then
        -- ä¼ é€åˆ°ç›®æ ‡ä½ç½®
        local teleportPos = targetInfo.RootPart.Position + Vector3.new(0, teleportHeight * 4, 0)
        humanoidRootPart.CFrame = CFrame.new(teleportPos)

        -- æ›´æ–°æŒ‰é’®æ˜¾ç¤º
        if not isMinimized then
            cycleTeleportButton.Text = string.format("ä¼ é€è‡³\n%s", targetInfo.Player.Name)
        end

        -- æ›´æ–°ç´¢å¼•åˆ°ä¸‹ä¸€ä¸ªç©å®¶
        cycleTeleportIndex = cycleTeleportIndex + 1
        if cycleTeleportIndex > #validPlayers then
            cycleTeleportIndex = 1
        end

        -- å¦‚æœå¤„äºç¼©å°æ¨¡å¼ï¼Œæ›´æ–°çŠ¶æ€
        if isMinimized then
            statusLabel.Text = string.format("ä¼ é€è‡³\n%s", targetInfo.Player.Name)
        end

        return targetInfo
    end
end

-- æ‰§è¡Œå·¥å‚ä¼ é€
local function performFactoryTeleport()
    local character = player.Character
    if not character then return end

    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
    if not humanoidRootPart then return end

    -- è·å–å½“å‰ä½ç½®
    local currentLocation = factoryLocations[factoryTeleportIndex]

    if currentLocation then
        -- ä¼ é€åˆ°æŒ‡å®šä½ç½®
        local teleportPos = Vector3.new(
            currentLocation.X,
            currentLocation.Y,
            currentLocation.Z
        )
        humanoidRootPart.CFrame = CFrame.new(teleportPos)

        -- æ›´æ–°æŒ‰é’®æ˜¾ç¤ºå½“å‰ä½ç½®
        factoryTeleportButton.Text = string.format("å·¥å‚ä¼ é€\n%d/%d", 
            factoryTeleportIndex, #factoryLocations)

        -- æ›´æ–°ç´¢å¼•åˆ°ä¸‹ä¸€ä¸ªä½ç½®
        factoryTeleportIndex = factoryTeleportIndex + 1
        if factoryTeleportIndex > #factoryLocations then
            factoryTeleportIndex = 1
        end

        return true
    end

    return false
end

-- æ‰§è¡Œå‰§é™¢ä¼ é€
local function performTheaterTeleport()
    local character = player.Character
    if not character then return end

    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
    if not humanoidRootPart then return end

    -- è·å–å½“å‰ä½ç½®
    local currentLocation = theaterLocations[theaterTeleportIndex]

    if currentLocation then
        -- ä¼ é€åˆ°æŒ‡å®šä½ç½®
        local teleportPos = Vector3.new(
            currentLocation.X,
            currentLocation.Y,
            currentLocation.Z
        )
        humanoidRootPart.CFrame = CFrame.new(teleportPos)

        -- æ›´æ–°æŒ‰é’®æ˜¾ç¤ºå½“å‰ä½ç½®
        theaterTeleportButton.Text = string.format("å‰§é™¢ä¼ é€\n%d/%d", 
            theaterTeleportIndex, #theaterLocations)

        -- æ›´æ–°ç´¢å¼•åˆ°ä¸‹ä¸€ä¸ªä½ç½®
        theaterTeleportIndex = theaterTeleportIndex + 1
        if theaterTeleportIndex > #theaterLocations then
            theaterTeleportIndex = 1
        end

        return true
    end

    return false
end

-- æ‰§è¡Œä¸‰åˆä¸€åŠŸèƒ½
local function performCombo()
    if not isComboActive then return false end

    local target = getNearestPlayer()
    currentTarget = target

    if target then
        -- æ˜¾ç¤ºç›®æ ‡è¡€é‡ï¼ˆä»…é™ç¼©å°æ¨¡å¼ï¼‰
        if isMinimized then
            statusLabel.Text = string.format("killaura\n%s HP:%.0f", 
                target.Player.Name, target.Health)
        end

        -- 1. è‡ªç„ï¼ˆç„å‡†å¤´éƒ¨ï¼‰
        local head = target.Character:FindFirstChild("Head")
        local aimPosition = head and head.Position or target.Position

        local cameraCFrame = camera.CFrame
        local targetDirection = (aimPosition - cameraCFrame.Position).Unit
        local currentLook = cameraCFrame.LookVector
        local smoothedDirection = currentLook:Lerp(targetDirection, 0.5)
        camera.CFrame = CFrame.new(cameraCFrame.Position, cameraCFrame.Position + smoothedDirection)

        -- 2. ä¼ é€ï¼ˆåˆ°ç›®æ ‡ä½ç½®ï¼Œé«˜åº¦ä¸º0ï¼‰
        local character = player.Character
        if character then
            local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
            if humanoidRootPart then
                local teleportPos = target.Position + Vector3.new(0, teleportHeight * 4, 0)
                humanoidRootPart.CFrame = CFrame.new(teleportPos)
            end
        end

        -- 3. æ”»å‡»ï¼ˆè‡ªåŠ¨å·¦é”®ï¼‰
        local currentTime = tick()
        if currentTime - lastAttackTime >= (1 / attackRate) then
            pcall(function()
                VirtualInputManager:SendMouseButtonEvent(0, 0, 0, true, game, 1)
                task.wait(0.05)
                VirtualInputManager:SendMouseButtonEvent(0, 0, 0, false, game, 1)
            end)
            lastAttackTime = currentTime
        end

        return true
    else
        if isMinimized then
            statusLabel.Text = "killaura\næ— æœ‰æ•ˆç›®æ ‡"
        end
        return false
    end
end

-- æŒ‰é’®ç‚¹å‡»äº‹ä»¶
cycleTeleportButton.MouseButton1Click:Connect(function()
    performCycleTeleport()
end)

factoryTeleportButton.MouseButton1Click:Connect(function()
    performFactoryTeleport()
end)

theaterTeleportButton.MouseButton1Click:Connect(function()
    performTheaterTeleport()
end)

-- ä¸»å¾ªç¯
RunService.Heartbeat:Connect(function()
    if not isRunning then return end
    performCombo()
end)

-- å¿«æ·é”®ï¼ˆä¿®å¤ç‰ˆï¼‰
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end

    -- ç©ºæ ¼é”®ï¼šå¼€å…³ä¸‰åˆä¸€
    if input.KeyCode == Enum.KeyCode.Space then
        isComboActive = not isComboActive

        if isComboActive then
            comboButton.Text = "ğŸŸ¢ å¼€å¯\næ€æˆ®å…‰ç¯"
            comboButton.BackgroundColor3 = Color3.fromRGB(60, 180, 80)
            if isMinimized then
                statusLabel.Text = "killaura\nè¿è¡Œä¸­"
            end
        else
            comboButton.Text = "ğŸ”´ å…³é—­\næ€æˆ®å…‰ç¯"
            comboButton.BackgroundColor3 = Color3.fromRGB(180, 60, 60)
            currentTarget = nil
            if isMinimized then
                statusLabel.Text = "Monster\nå·²å…³é—­"
            end
        end
    end

    -- Té”®ï¼šè§¦å‘è½®æµä¼ é€
    if input.KeyCode == Enum.KeyCode.T then
        performCycleTeleport()
    end

    -- Fé”®ï¼šè§¦å‘å·¥å‚ä¼ é€
    if input.KeyCode == Enum.KeyCode.F then
        performFactoryTeleport()
    end

    -- Vé”®ï¼šè§¦å‘å‰§é™¢ä¼ é€
    if input.KeyCode == Enum.KeyCode.V then
        performTheaterTeleport()
    end

    -- Mé”®ï¼šç¼©å°/æ”¾å¤§ï¼ˆä¿®å¤ç‰ˆï¼‰
    if input.KeyCode == Enum.KeyCode.M then
        isMinimized = not isMinimized

        if isMinimized then
            -- ä¿å­˜å½“å‰ä½ç½®
            originalPosition = mainFrame.Position
            
            local currentPos = mainFrame.Position
            local tween = TweenService:Create(mainFrame, TweenInfo.new(0.3), {
                Size = minimizedSize,
                Position = currentPos
            })
            tween:Play()

            tween.Completed:Wait()

            comboButton.Visible = false
            cycleTeleportButton.Visible = false
            factoryTeleportButton.Visible = false
            theaterTeleportButton.Visible = false
            statusLabel.Visible = true
            minimizeBtn.Text = "+"
            title.Text = "æ¸”ç‚’é±¼"

            if isComboActive then
                statusLabel.Text = "killaura\nè¿è¡Œä¸­"
            else
                statusLabel.Text = "killaura\nå·²å…³é—­"
            end
        else
            comboButton.Visible = true
            cycleTeleportButton.Visible = true
            factoryTeleportButton.Visible = true
            theaterTeleportButton.Visible = true
            statusLabel.Visible = false
            minimizeBtn.Text = "_"
            title.Text = "Monster"

            -- æ¢å¤å¤§å°ï¼ˆæ ¹æ®å½“å‰ç¼©æ”¾çŠ¶æ€ï¼‰ï¼Œä¿æŒå½“å‰ä½ç½®
            local currentPos = mainFrame.Position
            local targetSize = isZoomed and zoomedSize or originalSize
            
            local tween = TweenService:Create(mainFrame, TweenInfo.new(0.3), {
                Size = targetSize,
                Position = currentPos
            })
            tween:Play()
        end
    end

    -- Zé”®ï¼šè§¦å‘ç¼©æ”¾ï¼ˆä¿®å¤ç‰ˆï¼‰
    if input.KeyCode == Enum.KeyCode.Z then
        isZoomed = not isZoomed

        if isZoomed then
            -- æ”¾å¤§ç•Œé¢ï¼Œä¿æŒå½“å‰ä½ç½®
            local currentPos = mainFrame.Position
            local tween = TweenService:Create(mainFrame, TweenInfo.new(0.3), {
                Size = zoomedSize,
                Position = currentPos
            })
            tween:Play()

            zoomBtn.Text = "â–¶ï¸"
            zoomBtn.BackgroundColor3 = Color3.fromRGB(80, 140, 220)

            -- æ”¾å¤§åæ›´æ–°æ–‡æœ¬å¤§å°
            if not isMinimized then
                comboButton.TextSize = 15
                cycleTeleportButton.TextSize = 15
                factoryTeleportButton.TextSize = 15
                theaterTeleportButton.TextSize = 15
                title.TextSize = 15
            end
        else
            -- ç¼©å°åˆ°åŸå§‹å¤§å°ï¼Œä¿æŒå½“å‰ä½ç½®
            local currentPos = mainFrame.Position
            local tween = TweenService:Create(mainFrame, TweenInfo.new(0.3), {
                Size = originalSize,
                Position = currentPos
            })
            tween:Play()

            zoomBtn.Text = "â¸ï¸"
            zoomBtn.BackgroundColor3 = Color3.fromRGB(60, 100, 180)

            -- æ¢å¤åŸå§‹æ–‡æœ¬å¤§å°
            if not isMinimized then
                comboButton.TextSize = 14
                cycleTeleportButton.TextSize = 14
                factoryTeleportButton.TextSize = 14
                theaterTeleportButton.TextSize = 14
                title.TextSize = 14
            end
        end
    end
end)

-- åˆå§‹æ·¡å…¥åŠ¨ç”»ï¼ˆä¿®å¤ç‰ˆï¼‰
mainFrame.BackgroundTransparency = 1
mainFrame.Position = originalPosition + UDim2.new(0, 0, 0, -30)

task.wait(0.1)

local fadeInTween = TweenService:Create(mainFrame, TweenInfo.new(0.5), {
    BackgroundTransparency = 0.2,
    Position = originalPosition
})
fadeInTween:Play()

print("=== Monsterè„šæœ¬å·²åŠ è½½ ===")
print("å·¥å‚ä¼ é€ç‚¹:")
for i, loc in ipairs(factoryLocations) do
    print(string.format("  %d. X:%.2f, Y:%.2f, Z:%.2f", i, loc.X, loc.Y, loc.Z))
end
print("å‰§é™¢ä¼ é€ç‚¹:")
for i, loc in ipairs(theaterLocations) do
    print(string.format("  %d. X:%.2f, Y:%.2f, Z=%.2f", i, loc.X, loc.Y, loc.Z))
end

game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "Cheating",
    Text = "æˆåŠŸå…¥ä¾µPB",
    Icon = "rbxassetid://14550088217",
    Duration = 8,
    Position = UDim2.new(0, 20, 1, -50)
})