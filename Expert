-- ================================
-- ç´§å‡‘ç‰ˆé«˜çº§éªŒè¯ç³»ç»Ÿ v3.4 - å°å‹è‡ªå®šä¹‰å›¾ç‰‡ç‰ˆ + é»‘åå•ç³»ç»Ÿ
-- ä½œè€…ï¼šæ¸”å¦™é±¼ | Bç«™ï¼šä½œè€…Bç«™ï¼Ÿ
-- ================================

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")

-- ç¡®ä¿ç©å®¶å­˜åœ¨
repeat RunService.Heartbeat:Wait() until Players.LocalPlayer
local Player = Players.LocalPlayer
local Gui = Player:WaitForChild("PlayerGui")

-- åˆ›å»ºæ™¯æ·±æ¨¡ç³Šæ•ˆæœ
local DepthOfField = Instance.new("DepthOfFieldEffect")
DepthOfField.FarIntensity = 0
DepthOfField.NearIntensity = 0
DepthOfField.InFocusRadius = 0
DepthOfField.Parent = Lighting

-- ================================
-- é»‘åå•ç³»ç»Ÿæ ¸å¿ƒé…ç½®
-- ================================
local BlacklistSystem = {}
-- é»‘åå•ç©å®¶IDåˆ—è¡¨ï¼ˆå¡«å†™éœ€è¦å°ç¦çš„ç©å®¶IDï¼ŒåŒºåˆ†å¤§å°å†™ï¼‰
BlacklistSystem.BannedIDs = {
    "awa",
    "Cheater007",
    "Hacker999",
    -- å¯ç»§ç»­æ·»åŠ éœ€è¦å°ç¦çš„ID
}

-- æ£€æµ‹ç©å®¶æ˜¯å¦åœ¨é»‘åå•
function BlacklistSystem:isBanned(player)
    local playerId = player.Name or player.UserId -- å¯é€‰æ‹©æŒ‰ç”¨æˆ·åæˆ–ç”¨æˆ·IDæ£€æµ‹
    for _, bannedId in ipairs(self.BannedIDs) do
        if playerId == bannedId or tostring(player.UserId) == bannedId then
            return true
        end
    end
    return false
end

-- æ˜¾ç¤ºå°ç¦æç¤ºå¹¶ç¦ç”¨UI
function BlacklistSystem:showBanUI(parentGui)
    local BanScreen = Instance.new("ScreenGui")
    BanScreen.Name = "BanScreen"
    BanScreen.ResetOnSpawn = false
    BanScreen.Parent = parentGui

    local BanContainer = Instance.new("Frame")
    BanContainer.Size = UDim2.new(0, 300, 0, 200)
    BanContainer.Position = UDim2.new(0.5, -150, 0.5, -100)
    BanContainer.BackgroundColor3 = Color3.fromRGB(30, 10, 10)
    BanContainer.BackgroundTransparency = 0.1
    BanContainer.ClipsDescendants = true
    BanContainer.Parent = BanScreen

    local BanCorner = Instance.new("UICorner")
    BanCorner.CornerRadius = UDim.new(0, 12)
    BanCorner.Parent = BanContainer

    local BanTitle = Instance.new("TextLabel")
    BanTitle.Size = UDim2.new(1, 0, 0, 40)
    BanTitle.Position = UDim2.new(0, 0, 0, 20)
    BanTitle.BackgroundTransparency = 1
    BanTitle.Text = "ğŸš« æ‚¨å·²è¢«å°ç¦"
    BanTitle.TextColor3 = Color3.fromRGB(255, 80, 80)
    BanTitle.TextSize = 22
    BanTitle.Font = Enum.Font.GothamBold
    BanTitle.Parent = BanContainer

    local BanText = Instance.new("TextLabel")
    BanText.Size = UDim2.new(0.9, 0, 0, 60)
    BanText.Position = UDim2.new(0.05, 0, 0, 70)
    BanText.BackgroundTransparency = 1
    BanText.Text = "æ‚¨çš„è´¦å·å› è¿è§„æ“ä½œè¢«åŠ å…¥é»‘åå•ï¼Œæ— æ³•ä½¿ç”¨æœ¬éªŒè¯ç³»ç»Ÿã€‚"
    BanText.TextColor3 = Color3.fromRGB(220, 220, 220)
    BanText.TextSize = 14
    BanText.Font = Enum.Font.Gotham
    BanText.TextWrapped = true
    BanText.Parent = BanContainer

    local CloseBanBtn = Instance.new("TextButton")
    CloseBanBtn.Size = UDim2.new(0, 24, 0, 24)
    CloseBanBtn.Position = UDim2.new(1, -28, 0, 8)
    CloseBanBtn.BackgroundColor3 = Color3.fromRGB(50, 20, 20)
    CloseBanBtn.Text = "Ã—"
    CloseBanBtn.TextColor3 = Color3.fromRGB(220, 220, 220)
    CloseBanBtn.TextSize = 16
    CloseBanBtn.Font = Enum.Font.GothamBold
    CloseBanBtn.Parent = BanContainer

    local CloseBanCorner = Instance.new("UICorner")
    CloseBanCorner.CornerRadius = UDim.new(0.5, 0)
    CloseBanCorner.Parent = CloseBanBtn

    CloseBanBtn.MouseButton1Click:Connect(function()
        BanScreen:Destroy()
        game:GetService("Players").LocalPlayer:Kick("æ‚¨å·²è¢«å°ç¦ï¼Œæ— æ³•è¿›å…¥æ¸¸æˆ") -- å¯é€‰ï¼šç›´æ¥è¸¢å‡ºæ¸¸æˆ
    end)

    -- å¯ç”¨æ¨¡ç³Šæ•ˆæœ
    local blurTween = TweenService:Create(DepthOfField, TweenInfo.new(0.8), {
        FarIntensity = 1,
        NearIntensity = 0.8,
        InFocusRadius = 20
    })
    blurTween:Play()

    return BanScreen
end

-- å…ˆæ£€æµ‹é»‘åå•ï¼Œè‹¥è¢«å°ç¦åˆ™ç›´æ¥æ˜¾ç¤ºæç¤º
if BlacklistSystem:isBanned(Player) then
    BlacklistSystem:showBanUI(Gui)
    -- ç»ˆæ­¢åç»­è„šæœ¬æ‰§è¡Œ
    return
end

-- ================================
-- å°å‹ç´§å‡‘UIåˆ›å»º
-- ================================
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "SmallAuthSystem"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.IgnoreGuiInset = false

-- å°å‹ä¸»å®¹å™¨ï¼ˆæ›´å°æ›´å±…ä¸­ï¼‰
local MainContainer = Instance.new("Frame")
MainContainer.Size = UDim2.new(0, 260, 0, 320)  -- æ›´å°çš„å°ºå¯¸
MainContainer.Position = UDim2.new(0.5, -130, 0.5, -160)  -- æ›´å±…ä¸­
MainContainer.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
MainContainer.BackgroundTransparency = 0.1
MainContainer.BorderSizePixel = 0
MainContainer.ClipsDescendants = true
MainContainer.Parent = ScreenGui

-- æ·»åŠ åœ†è§’
local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 12)
MainCorner.Parent = MainContainer

-- æ·»åŠ ç»ç’ƒæ€æ•ˆæœ
local GlassEffect = Instance.new("Frame")
GlassEffect.Size = UDim2.new(1, 0, 1, 0)
GlassEffect.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
GlassEffect.BackgroundTransparency = 0.96
GlassEffect.BorderSizePixel = 0
GlassEffect.ZIndex = 0
GlassEffect.Parent = MainContainer

-- ç®€æ´é¡¶éƒ¨æ¡
local TopBar = Instance.new("Frame")
TopBar.Size = UDim2.new(1, 0, 0, 2)  -- æ›´ç»†
TopBar.Position = UDim2.new(0, 0, 0, 0)
TopBar.BackgroundColor3 = Color3.fromRGB(0, 150, 220)
TopBar.BorderSizePixel = 0
TopBar.Parent = MainContainer

-- æ ‡é¢˜åŒºåŸŸï¼ˆæ›´ç´§å‡‘ï¼‰
local Header = Instance.new("Frame")
Header.Size = UDim2.new(1, 0, 0, 80)  -- æ›´çŸ®
Header.Position = UDim2.new(0, 0, 0, 5)
Header.BackgroundTransparency = 1
Header.Parent = MainContainer

-- å°å‹è‡ªå®šä¹‰å›¾ç‰‡å¾½æ ‡
local CustomLogo = Instance.new("Frame")
CustomLogo.Size = UDim2.new(0, 50, 0, 50)  -- æ›´å°çš„å›¾ç‰‡å°ºå¯¸
CustomLogo.Position = UDim2.new(0.5, -25, 0, 0)
CustomLogo.BackgroundTransparency = 1
CustomLogo.Parent = Header

-- å°å‹å›¾ç‰‡å®¹å™¨
local LogoImage = Instance.new("ImageLabel")
LogoImage.Size = UDim2.new(1, 0, 1, 0)
LogoImage.BackgroundTransparency = 1
LogoImage.Image = "rbxassetid://98446998103932"  -- ä½ çš„è‡ªå®šä¹‰å›¾ç‰‡ID
LogoImage.ScaleType = Enum.ScaleType.Fit
LogoImage.ImageColor3 = Color3.fromRGB(255, 255, 255)
LogoImage.Parent = CustomLogo

-- æ·»åŠ åœ†è§’
local ImageCorner = Instance.new("UICorner")
ImageCorner.CornerRadius = UDim.new(0, 8)
ImageCorner.Parent = LogoImage

-- æ·»åŠ å‘å…‰è¾¹æ¡†
local ImageStroke = Instance.new("UIStroke")
ImageStroke.Color = Color3.fromRGB(0, 180, 255)
ImageStroke.Thickness = 1.5  -- æ›´ç»†çš„è¾¹æ¡†
ImageStroke.Transparency = 0.5
ImageStroke.Parent = LogoImage

-- æ ‡é¢˜ï¼ˆå­—ä½“ç¨å°ï¼‰
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 22)
Title.Position = UDim2.new(0, 0, 0.7, 0)
Title.BackgroundTransparency = 1
Title.Text = "éªŒè¯ç³»ç»Ÿ"
Title.TextColor3 = Color3.fromRGB(240, 240, 255)
Title.TextSize = 18  -- æ›´å°çš„å­—ä½“
Title.Font = Enum.Font.GothamBold
Title.TextStrokeColor3 = Color3.fromRGB(0, 50, 100)
Title.TextStrokeTransparency = 0.8
Title.Parent = Header

local Author = Instance.new("TextLabel")
Author.Size = UDim2.new(1, 0, 0, 16)
Author.Position = UDim2.new(0, 0, 0.95, 0)
Author.BackgroundTransparency = 1
Author.Text = "ä½œè€…Bç«™ï¼Ÿ"
Author.TextColor3 = Color3.fromRGB(170, 180, 200)
Author.TextSize = 10  -- æ›´å°çš„å­—ä½“
Author.Font = Enum.Font.Gotham
Author.Parent = Header

-- è¾“å…¥åŒºåŸŸï¼ˆæ›´ç´§å‡‘ï¼‰
local InputSection = Instance.new("Frame")
InputSection.Size = UDim2.new(0.85, 0, 0, 48)  -- æ›´çŸ®
InputSection.Position = UDim2.new(0.075, 0, 0.32, 0)
InputSection.BackgroundTransparency = 1
InputSection.Parent = MainContainer

local InputBox = Instance.new("Frame")
InputBox.Size = UDim2.new(1, 0, 1, 0)
InputBox.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
InputBox.BackgroundTransparency = 0.1
InputBox.Parent = InputSection

local InputBoxCorner = Instance.new("UICorner")
InputBoxCorner.CornerRadius = UDim.new(0, 6)
InputBoxCorner.Parent = InputBox

local InputBoxStroke = Instance.new("UIStroke")
InputBoxStroke.Color = Color3.fromRGB(50, 60, 80)
InputBoxStroke.Thickness = 1
InputBoxStroke.Parent = InputBox

local KeyInput = Instance.new("TextBox")
KeyInput.Size = UDim2.new(0.9, 0, 0.8, 0)
KeyInput.Position = UDim2.new(0.05, 0, 0.1, 0)
KeyInput.BackgroundTransparency = 1
KeyInput.PlaceholderText = "è¾“å…¥éªŒè¯å¯†é’¥..."
KeyInput.PlaceholderColor3 = Color3.fromRGB(120, 130, 150)
KeyInput.Text = ""
KeyInput.TextColor3 = Color3.fromRGB(240, 240, 255)
KeyInput.TextSize = 14  -- æ›´å°çš„å­—ä½“
KeyInput.Font = Enum.Font.GothamMedium
KeyInput.ClearTextOnFocus = false
KeyInput.Parent = InputBox

local InputLine = Instance.new("Frame")
InputLine.Size = UDim2.new(0, 0, 0, 2)
InputLine.Position = UDim2.new(0, 0, 1, -2)
InputLine.BackgroundColor3 = Color3.fromRGB(0, 150, 220)
InputLine.BorderSizePixel = 0
InputLine.Parent = InputBox

-- éªŒè¯æŒ‰é’®ï¼ˆæ›´å°ï¼‰
local VerifyButton = Instance.new("TextButton")
VerifyButton.Size = UDim2.new(0.7, 0, 0, 40)  -- æ›´çŸ®
VerifyButton.Position = UDim2.new(0.15, 0, 0.52, 0)
VerifyButton.BackgroundColor3 = Color3.fromRGB(0, 130, 210)
VerifyButton.AutoButtonColor = false
VerifyButton.Text = ""
VerifyButton.Parent = MainContainer

local ButtonCorner = Instance.new("UICorner")
ButtonCorner.CornerRadius = UDim.new(0, 8)
ButtonCorner.Parent = VerifyButton

local ButtonGradient = Instance.new("UIGradient")
ButtonGradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(0, 130, 210)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(0, 150, 230)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 130, 210))
})
ButtonGradient.Rotation = 90
ButtonGradient.Parent = VerifyButton

local ButtonLabel = Instance.new("TextLabel")
ButtonLabel.Size = UDim2.new(1, 0, 1, 0)
ButtonLabel.BackgroundTransparency = 1
ButtonLabel.Text = "éªŒè¯å¹¶å¯åŠ¨"
ButtonLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
ButtonLabel.TextSize = 15  -- æ›´å°çš„å­—ä½“
ButtonLabel.Font = Enum.Font.GothamBold
ButtonLabel.Parent = VerifyButton

local ButtonIcon = Instance.new("TextLabel")
ButtonIcon.Size = UDim2.new(0, 18, 0, 18)  -- æ›´å°
ButtonIcon.Position = UDim2.new(1, -22, 0.5, -9)  -- è°ƒæ•´ä½ç½®
ButtonIcon.BackgroundTransparency = 1
ButtonIcon.Text = "â†’"
ButtonIcon.TextColor3 = Color3.fromRGB(255, 255, 255)
ButtonIcon.TextSize = 14  -- æ›´å°çš„å­—ä½“
ButtonIcon.Font = Enum.Font.GothamBold
ButtonIcon.Parent = VerifyButton

-- çŠ¶æ€æ˜¾ç¤ºï¼ˆæ›´ç´§å‡‘ï¼‰
local StatusArea = Instance.new("Frame")
StatusArea.Size = UDim2.new(0.85, 0, 0, 45)  -- æ›´çŸ®
StatusArea.Position = UDim2.new(0.075, 0, 0.68, 0)
StatusArea.BackgroundTransparency = 1
StatusArea.Parent = MainContainer

local StatusBox = Instance.new("Frame")
StatusBox.Size = UDim2.new(1, 0, 1, 0)
StatusBox.BackgroundColor3 = Color3.fromRGB(25, 30, 40)
StatusBox.BackgroundTransparency = 0.8
StatusBox.Parent = StatusArea

local StatusBoxCorner = Instance.new("UICorner")
StatusBoxCorner.CornerRadius = UDim.new(0, 6)
StatusBoxCorner.Parent = StatusBox

local StatusIndicator = Instance.new("Frame")
StatusIndicator.Size = UDim2.new(0, 8, 0, 8)  -- æ›´å°
StatusIndicator.Position = UDim2.new(0.05, 0, 0.5, -4)
StatusIndicator.BackgroundColor3 = Color3.fromRGB(120, 130, 150)
StatusIndicator.Parent = StatusBox

local StatusIndicatorCorner = Instance.new("UICorner")
StatusIndicatorCorner.CornerRadius = UDim.new(1, 0)
StatusIndicatorCorner.Parent = StatusIndicator

local StatusText = Instance.new("TextLabel")
StatusText.Size = UDim2.new(0.85, 0, 1, 0)
StatusText.Position = UDim2.new(0.15, 0, 0, 0)
StatusText.BackgroundTransparency = 1
StatusText.Text = "ç­‰å¾…éªŒè¯..."
StatusText.TextColor3 = Color3.fromRGB(170, 180, 200)
StatusText.TextSize = 12  -- æ›´å°çš„å­—ä½“
StatusText.Font = Enum.Font.GothamMedium
StatusText.TextXAlignment = Enum.TextXAlignment.Left
StatusText.Parent = StatusBox

-- åº•éƒ¨ä¿¡æ¯ï¼ˆæ›´å°ï¼‰
local Footer = Instance.new("Frame")
Footer.Size = UDim2.new(1, 0, 0, 28)  -- æ›´çŸ®
Footer.Position = UDim2.new(0, 0, 1, -28)
Footer.BackgroundColor3 = Color3.fromRGB(15, 20, 30)
Footer.BackgroundTransparency = 0.3
Footer.Parent = MainContainer

local VersionText = Instance.new("TextLabel")
VersionText.Size = UDim2.new(1, 0, 1, 0)
VersionText.BackgroundTransparency = 1
VersionText.Text = "v3.4 | å¯†é’¥éªŒè¯ç³»ç»Ÿ"
VersionText.TextColor3 = Color3.fromRGB(120, 140, 160)
VersionText.TextSize = 10  -- æ›´å°çš„å­—ä½“
VersionText.Font = Enum.Font.Gotham
VersionText.Parent = Footer

-- å…³é—­æŒ‰é’®ï¼ˆæ›´å°ï¼‰
local CloseButton = Instance.new("TextButton")
CloseButton.Size = UDim2.new(0, 22, 0, 22)  -- æ›´å°
CloseButton.Position = UDim2.new(1, -26, 0, 6)
CloseButton.BackgroundColor3 = Color3.fromRGB(40, 45, 55)
CloseButton.AutoButtonColor = false
CloseButton.Text = "Ã—"
CloseButton.TextColor3 = Color3.fromRGB(200, 210, 220)
CloseButton.TextSize = 16  -- æ›´å°çš„å­—ä½“
CloseButton.Font = Enum.Font.GothamBold
CloseButton.BorderSizePixel = 0
CloseButton.Parent = MainContainer

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0.5, 0)
CloseCorner.Parent = CloseButton

-- æ·»åŠ å°å‹å¤–å‘å…‰
local OuterGlow = Instance.new("ImageLabel")
OuterGlow.Size = UDim2.new(1, 16, 1, 16)  -- æ›´å°çš„å‘å…‰
OuterGlow.Position = UDim2.new(0, -8, 0, -8)
OuterGlow.BackgroundTransparency = 1
OuterGlow.Image = "rbxassetid://5554237733"
OuterGlow.ImageColor3 = Color3.fromRGB(0, 100, 200)
OuterGlow.ImageTransparency = 0.85
OuterGlow.ScaleType = Enum.ScaleType.Slice
OuterGlow.SliceCenter = Rect.new(23, 23, 277, 277)
OuterGlow.Parent = MainContainer
OuterGlow.ZIndex = -1

-- ================================
-- ä¿®å¤çš„éªŒè¯ç³»ç»Ÿ
-- ================================
local AuthSystem = {}

-- æœ‰æ•ˆå¯†é’¥åˆ—è¡¨
AuthSystem.ValidKeys = {
    "æ¸”ç‚’é±¼",
    " ",
    "SB",
    "å‚»é€¼",
    "MCBFUN",
}

-- éªŒè¯å‡½æ•°
function AuthSystem:validateKey(input)
    if not input or type(input) ~= "string" then
        return false, "è¯·è¾“å…¥æœ‰æ•ˆå¯†é’¥"
    end

    local cleaned = input:gsub("%s+", "")

    if cleaned == "" then
        return false, "å¯†é’¥ä¸èƒ½ä¸ºç©º"
    end

    for _, validKey in ipairs(self.ValidKeys) do
        if cleaned == validKey then
            return true, "éªŒè¯æˆåŠŸï¼"
        end
    end

    return false, "å¯†é’¥æ— æ•ˆ"
end

-- æ‰§è¡Œè„šæœ¬
function AuthSystem:executeScript()
    local url = "https://github.com/MCBFU/roblox/raw/refs/heads/main/pb.on1"

    local success, err = pcall(function()
        local scriptContent = game:HttpGet(url, true)
        if scriptContent then
            loadstring(scriptContent)()
        else
            error("æ— æ³•è·å–è„šæœ¬å†…å®¹")
        end
    end)

    return success, err
end

-- ================================
-- æ™¯æ·±æ¨¡ç³Šæ•ˆæœæ§åˆ¶
-- ================================
local function enableDepthBlur()
    local blurTween = TweenService:Create(DepthOfField, TweenInfo.new(0.8), {
        FarIntensity = 0.8,
        NearIntensity = 0.5,
        InFocusRadius = 50
    })
    blurTween:Play()
    return blurTween
end

local function disableDepthBlur()
    local blurTween = TweenService:Create(DepthOfField, TweenInfo.new(0.8), {
        FarIntensity = 0,
        NearIntensity = 0,
        InFocusRadius = 0
    })
    blurTween:Play()
    return blurTween
end

-- ================================
-- åŠ¨ç”»å·¥å…·
-- ================================
local function createTween(obj, props, time)
    local tween = TweenService:Create(obj, TweenInfo.new(time or 0.3), props)
    return tween
end

-- ================================
-- æ˜¾ç¤ºUIå¹¶åˆå§‹åŒ–
-- ================================
ScreenGui.Parent = Gui

-- å¯ç”¨æ™¯æ·±æ¨¡ç³Š
enableDepthBlur()

-- æ’­æ”¾å…¥åœºåŠ¨ç”»ï¼ˆæ›´å±…ä¸­ï¼‰
local entranceTween = createTween(MainContainer, {
    Position = UDim2.new(0.5, -130, 0.5, -160),
    BackgroundTransparency = 0.1
}, 0.5)

entranceTween:Play()

-- æ‰“å°è°ƒè¯•ä¿¡æ¯

-- ================================
-- äº¤äº’æ•ˆæœ
-- ================================

-- è¾“å…¥æ¡†æ•ˆæœ
KeyInput.Focused:Connect(function()
    createTween(InputLine, {
        Size = UDim2.new(1, 0, 0, 2)
    }):Play()

    createTween(InputBox, {
        BackgroundColor3 = Color3.fromRGB(35, 35, 45)
    }):Play()
end)

KeyInput.FocusLost:Connect(function()
    createTween(InputLine, {
        Size = UDim2.new(0, 0, 0, 2)
    }):Play()

    createTween(InputBox, {
        BackgroundColor3 = Color3.fromRGB(30, 30, 40)
    }):Play()
end)

-- éªŒè¯æŒ‰é’®æ•ˆæœ
VerifyButton.MouseEnter:Connect(function()
    createTween(VerifyButton, {
        BackgroundColor3 = Color3.fromRGB(0, 150, 230),
        Size = UDim2.new(0.72, 0, 0, 42)
    }, 0.2):Play()

    createTween(ButtonIcon, {
        Position = UDim2.new(1, -20, 0.5, -9)
    }, 0.3):Play()
end)

VerifyButton.MouseLeave:Connect(function()
    createTween(VerifyButton, {
        BackgroundColor3 = Color3.fromRGB(0, 130, 210),
        Size = UDim2.new(0.7, 0, 0, 40)
    }, 0.2):Play()

    createTween(ButtonIcon, {
        Position = UDim2.new(1, -22, 0.5, -9)
    }, 0.3):Play()
end)

-- å…³é—­æŒ‰é’®æ•ˆæœ
CloseButton.MouseEnter:Connect(function()
    createTween(CloseButton, {
        BackgroundColor3 = Color3.fromRGB(50, 55, 65),
        Rotation = 90,
        Size = UDim2.new(0, 24, 0, 24)
    }, 0.3):Play()
end)

CloseButton.MouseLeave:Connect(function()
    createTween(CloseButton, {
        BackgroundColor3 = Color3.fromRGB(40, 45, 55),
        Rotation = 0,
        Size = UDim2.new(0, 22, 0, 22)
    }, 0.3):Play()
end)

-- ================================
-- ä¸»éªŒè¯åŠŸèƒ½
-- ================================
local function updateStatus(text, color)
    StatusText.Text = text
    StatusText.TextColor3 = color
    StatusIndicator.BackgroundColor3 = color
end

VerifyButton.MouseButton1Click:Connect(function()
    local input = KeyInput.Text

    if input == "" then
        updateStatus("è¯·è¾“å…¥å¯†é’¥", Color3.fromRGB(255, 150, 50))
        return
    end

    -- æ˜¾ç¤ºéªŒè¯ä¸­çŠ¶æ€
    updateStatus("æ­£åœ¨éªŒè¯...", Color3.fromRGB(100, 200, 255))
    ButtonLabel.Text = "éªŒè¯ä¸­..."

    -- æ—‹è½¬åŠ¨ç”»
    local spinConnection
    local spinAngle = 0
    spinConnection = RunService.Heartbeat:Connect(function(delta)
        spinAngle = spinAngle + delta * 360
        StatusIndicator.Rotation = spinAngle
    end)

    wait(0.8)

    if spinConnection then
        spinConnection:Disconnect()
        StatusIndicator.Rotation = 0
    end

    -- éªŒè¯å¯†é’¥
    local isValid, message = AuthSystem:validateKey(input)

    if isValid then
        updateStatus("âœ… " .. message, Color3.fromRGB(100, 255, 100))

        -- æŒ‰é’®çŠ¶æ€æ›´æ–°
        ButtonLabel.Text = "å¯åŠ¨ä¸­..."
        ButtonIcon.Text = "âœ“"

        wait(0.5)

        -- æ‰§è¡Œè„šæœ¬
        updateStatus("åŠ è½½è„šæœ¬ä¸­...", Color3.fromRGB(150, 220, 100))

        local success, err = AuthSystem:executeScript()

        if success then
            updateStatus("è„šæœ¬å¯åŠ¨æˆåŠŸï¼", Color3.fromRGB(100, 255, 100))

            -- æ·¡å‡ºæ•ˆæœå¹¶ç§»é™¤æ¨¡ç³Š
            createTween(MainContainer, {
                BackgroundTransparency = 1,
                Position = UDim2.new(0.5, -130, 0.5, -120)
            }, 0.8):Play()

            disableDepthBlur()

            wait(1)
            ScreenGui:Destroy()
        else
            updateStatus("è„šæœ¬é”™è¯¯: " .. tostring(err), Color3.fromRGB(255, 100, 100))
            ButtonLabel.Text = "éªŒè¯å¹¶å¯åŠ¨"
            ButtonIcon.Text = "â†’"
        end
    else
        updateStatus("âŒ " .. message, Color3.fromRGB(255, 100, 100))
        ButtonLabel.Text = "éªŒè¯å¹¶å¯åŠ¨"
        ButtonIcon.Text = "â†’"

        -- é”™è¯¯éœ‡åŠ¨æ•ˆæœ
        createTween(MainContainer, {
            Position = UDim2.new(0.5, -130 + math.random(-4, 4), 0.5, -160)
        }, 0.1):Play()

        wait(0.1)

        createTween(MainContainer, {
            Position = UDim2.new(0.5, -130, 0.5, -160)
        }, 0.1):Play()
    end
end)

-- å›è½¦é”®éªŒè¯
KeyInput.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        VerifyButton:Click()
    end
end)

-- å…³é—­ç³»ç»Ÿ
CloseButton.MouseButton1Click:Connect(function()
    createTween(MainContainer, {
        BackgroundTransparency = 1,
        Position = UDim2.new(0.5, -130, 0.5, -180)
    }, 0.5):Play()

    disableDepthBlur()

    wait(0.8)
    ScreenGui:Destroy()
end)

-- è‡ªåŠ¨èšç„¦
wait(0.5)
KeyInput:CaptureFocus()

-- è®¾ç½®åˆå§‹çŠ¶æ€
updateStatus("ç­‰å¾…éªŒè¯å¯†é’¥...", Color3.fromRGB(170, 180, 200))

-- ç¡®ä¿UIæ˜¾ç¤º
coroutine.wrap(function()
    wait(1)
    if ScreenGui and ScreenGui.Parent then
        print("âœ… å°å‹UIæ˜¾ç¤ºæ­£å¸¸")
        print("âœ… å›¾ç‰‡å°ºå¯¸å·²ç¼©å°")
        print("âœ… çª—å£æ›´åŠ å±…ä¸­ç´§å‡‘")
        print("âœ… é»‘åå•ç³»ç»ŸåŠ è½½å®Œæˆ")
    else
        print("âŒ UIæœªæ˜¾ç¤º")
    end
end)()